{"remainingRequest":"G:\\intellij work\\micro-ui\\node_modules\\babel-loader\\lib\\index.js!G:\\intellij work\\micro-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!G:\\intellij work\\micro-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\intellij work\\micro-ui\\src\\views\\portal\\archive\\unitmenu\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\intellij work\\micro-ui\\src\\views\\portal\\archive\\unitmenu\\index.vue","mtime":1557387298445},{"path":"G:\\intellij work\\micro-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\intellij work\\micro-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"G:\\intellij work\\micro-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\intellij work\\micro-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport _objectSpread from \"G:\\\\intellij work\\\\micro-ui\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { addObj, delObj, fetchMenuTree, getObj, putObj } from '@/api/portal/archive/unitmenu/unitMenu';\nimport { mapGetters } from 'vuex';\nimport { tableOption } from '@/const/crud/portal/archive/unitmenu/unitMenu';\nexport default {\n  name: 'unitMenu',\n  data: function data() {\n    return {\n      list: null,\n      total: null,\n      formEdit: true,\n      formAdd: true,\n      option: tableOption,\n      listLoading: true,\n      listQuery: {\n        name: undefined\n      },\n      checkedKeys: [],\n      treeData: [],\n      dicTreeData: [],\n      form: {\n        id: ''\n      },\n      dicTreeProps: {\n        label: \"name\",\n        value: 'id'\n      },\n      unitMenu_btn_add: false,\n      unitMenu_btn_edit: false,\n      unitMenu_btn_del: false\n    };\n  },\n  created: function created() {\n    this.getList();\n    this.getDicTreeData();\n    this.unitMenu_btn_add = this.permissions['unit_menu_add'];\n    this.unitMenu_btn_edit = this.permissions['unit_menu_edit'];\n    this.unitMenu_btn_del = this.permissions['unit_menu_del'];\n  },\n  computed: _objectSpread({}, mapGetters(['elements', 'permissions'])),\n  methods: {\n    getList: function getList() {\n      var _this = this;\n\n      this.listLoading = true;\n      fetchMenuTree(this.listQuery).then(function (response) {\n        console.log(response.data.data);\n        _this.treeData = response.data.data;\n        _this.listLoading = false;\n      });\n    },\n    getDicTreeData: function getDicTreeData() {\n      var _this2 = this;\n\n      if (this.treeData) {\n        fetchMenuTree().then(function (response) {\n          console.log(response.data.data);\n          _this2.dicTreeData = response.data.data;\n        });\n      }\n    },\n    handleAdd: function handleAdd() {\n      this.form = {};\n      this.form.parentId = '';\n      this.$refs.crud.rowAdd();\n    },\n    handAdd: function handAdd(row) {\n      this.form.parentId = row.id;\n      this.option.column[1].valueDefault = this.form.parentId;\n      this.$refs.crud.rowAdd();\n    },\n    handleEdit: function handleEdit(row, index) {\n      this.$refs.crud.rowEdit(row, index);\n    },\n    handleDelete: function handleDelete(row) {\n      var _this3 = this;\n\n      this.$confirm(\"此操作将永久删除(\" + row.name + \") , 是否继续?\", '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        delObj(row.id).then(function () {\n          _this3.getList();\n\n          _this3.getDicTreeData();\n\n          _this3.$notify({\n            title: '成功',\n            message: '删除成功',\n            type: 'success',\n            duration: 2000\n          });\n        }).cache(function () {\n          _this3.$notify({\n            title: \"失败\",\n            message: \"删除失败\",\n            type: \"error\",\n            duration: 2000\n          });\n        });\n      });\n    },\n    handleUpdate: function handleUpdate(row, index, done, loading) {\n      var _this4 = this;\n\n      this.form.id = row.id;\n      putObj(this.form).then(function () {\n        _this4.getList();\n\n        _this4.getDicTreeData();\n\n        done();\n\n        _this4.$notify({\n          title: '成功',\n          message: '更新成功',\n          type: 'success',\n          duration: 2000\n        });\n      }).catch(function () {\n        loading();\n      });\n    },\n    handleSave: function handleSave(row, done, loading) {\n      var _this5 = this;\n\n      addObj(this.form).then(function () {\n        _this5.getList();\n\n        _this5.getDicTreeData();\n\n        done();\n\n        _this5.$notify({\n          title: '成功',\n          message: '创建成功',\n          type: 'success',\n          duration: 2000\n        }).catch(function () {\n          loading();\n        });\n      });\n    },\n    handleFilter: function handleFilter(param) {\n      this.listQuery.name = param.name;\n      this.getList();\n    }\n  },\n  watch: {\n    'form.parentId': function formParentId() {\n      if (this.form.parentId === '-1' || this.form.parentId === '' || this.form.parentId === undefined) {\n        this.option.column[4].rules[0].required = false;\n        this.option.column[5].rules[0].required = false;\n        this.option.column[6].rules[0].required = false;\n      } else {\n        this.option.column[4].rules[0].required = true;\n        this.option.column[5].rules[0].required = true;\n        this.option.column[6].rules[0].required = true;\n      }\n    }\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"app-container calendar-list-container\">\n    <basic-container>\n\n\n      <avue-crud  ref=\"crud\"\n                  :option=\"option\"\n                  :data=\"treeData\"\n                  @search-change=\"handleFilter\"\n                  @refresh-change=\"handleFilter\"\n                  @row-update=\"handleUpdate\"\n                  @row-save=\"handleSave\"\n                  :table-loading=\"listLoading\"\n                  v-model=\"form\"\n      >\n        <template slot=\"menuLeft\">\n          <el-button type=\"primary\"\n                     @click=\"handleAdd\"\n                     size=\"small\"\n                     v-if=\"unitMenu_btn_add\">新 增</el-button>\n        </template>\n\n        <template slot=\"icon\" slot-scope=\"scope\">\n          <i v-if=\"scope.row.icon\" :class=\"scope.row.icon\" style=\"font-size:24px\"></i>\n        </template>\n\n        <template slot=\"parentIdForm\" slot-scope=\"scope\">\n          <avue-input v-model=\"form.parentId\"\n                      type=\"tree\"\n                      placeholder=\"父级菜单\"\n                      :dic=\"dicTreeData\"\n                      :props=\"dicTreeProps\">\n          </avue-input>\n        </template>\n        <template slot=\"menu\"\n                  slot-scope=\"scope\" >\n          <el-button size=\"mini\"\n                     type=\"text\"\n                     icon=\"el-icon-plus\"\n                     v-if=\"unitMenu_btn_add\"\n                     @click=\"handAdd(scope.row)\">添加子级\n          </el-button>\n            <el-button size=\"mini\"\n                       type=\"text\"\n                       icon=\"el-icon-edit\"\n                       v-if=\"unitMenu_btn_edit\"\n                       @click=\"handleEdit(scope.row,scope.index)\">编辑\n            </el-button>\n            <el-button size=\"mini\"\n                       type=\"text\"\n                       icon=\"el-icon-delete\"\n                       v-if=\"unitMenu_btn_del\"\n                       @click=\"handleDelete(scope.row)\">删除\n            </el-button>\n\n        </template>\n      </avue-crud>\n\n\n    </basic-container>\n  </div>\n</template>\n\n<script>\n  import {addObj, delObj, fetchMenuTree, getObj, putObj} from '@/api/portal/archive/unitmenu/unitMenu'\n  import {mapGetters} from 'vuex'\n  import {tableOption} from '@/const/crud/portal/archive/unitmenu/unitMenu';\n  export default {\n    name: 'unitMenu',\n    data() {\n      return {\n        list: null,\n        total: null,\n        formEdit: true,\n        formAdd: true,\n        option: tableOption,\n        listLoading: true,\n        listQuery: {\n          name: undefined\n        },\n        checkedKeys:[],\n        treeData: [],\n        dicTreeData:[],\n        form: {\n          id:''\n        },\n        dicTreeProps: {\n          label: \"name\",\n          value: 'id',\n        },\n        unitMenu_btn_add: false,\n        unitMenu_btn_edit: false,\n        unitMenu_btn_del: false\n      }\n    },\n    created() {\n      this.getList()\n      this.getDicTreeData()\n      this.unitMenu_btn_add = this.permissions['unit_menu_add']\n      this.unitMenu_btn_edit = this.permissions['unit_menu_edit']\n      this.unitMenu_btn_del = this.permissions['unit_menu_del']\n    },\n    computed: {\n      ...mapGetters([\n        'elements',\n        'permissions'\n      ])\n    },\n    methods: {\n      getList() {\n          this.listLoading = true\n        fetchMenuTree(this.listQuery).then(response => {\n          console.log(response.data.data);\n          this.treeData = response.data.data\n            this.listLoading = false\n        })\n      },\n      getDicTreeData(){\n          if(this.treeData){\n              fetchMenuTree().then(response => {\n                console.log(response.data.data);\n                  this.dicTreeData=response.data.data\n              })\n          }\n\n      },\n      handleAdd: function () {\n        this.form={}\n        this.form.parentId=''\n        this.$refs.crud.rowAdd()\n      },\n      handAdd: function (row) {\n        this.form.parentId=row.id\n        this.option.column[1].valueDefault = this.form.parentId\n        this.$refs.crud.rowAdd()\n      },\n      handleEdit(row, index) {\n        this.$refs.crud.rowEdit(row, index)\n      },\n\n      handleDelete(row) {\n        this.$confirm(\"此操作将永久删除(\" + row.name + \") , 是否继续?\", '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          delObj(row.id).then(() => {\n            this.getList()\n            this.getDicTreeData()\n            this.$notify({\n              title: '成功',\n              message: '删除成功',\n              type: 'success',\n              duration: 2000\n            })\n          }).cache(() => {\n            this.$notify({\n              title: \"失败\",\n              message: \"删除失败\",\n              type: \"error\",\n              duration: 2000\n            });\n          });\n\n        })\n      },\n      handleUpdate(row, index, done, loading) {\n        this.form.id=row.id\n        putObj(this.form).then(() => {\n          this.getList()\n          this.getDicTreeData()\n          done();\n          this.$notify({\n            title: '成功',\n            message: '更新成功',\n            type: 'success',\n            duration: 2000\n          })\n        }).catch(() => {\n          loading();\n        });\n      },\n      handleSave(row, done, loading) {\n        addObj(this.form).then(() => {\n          this.getList()\n          this.getDicTreeData()\n          done();\n          this.$notify({\n            title: '成功',\n            message: '创建成功',\n            type: 'success',\n            duration: 2000\n          }).catch(() => {\n            loading();\n          });\n        })\n      } ,\n      handleFilter(param) {\n        this.listQuery.name=param.name\n        this.getList();\n      }\n\n    },\n\n    watch:{\n      'form.parentId'(){\n        if(this.form.parentId==='-1'||this.form.parentId===''||this.form.parentId===undefined){\n          this.option.column[4].rules[0].required=false;\n          this.option.column[5].rules[0].required=false;\n          this.option.column[6].rules[0].required=false;\n        }else{\n          this.option.column[4].rules[0].required=true;\n          this.option.column[5].rules[0].required=true;\n          this.option.column[6].rules[0].required=true;\n        }\n      }\n    }\n\n  }\n</script>\n\n"],"sourceRoot":"src/views/portal/archive/unitmenu"}]}