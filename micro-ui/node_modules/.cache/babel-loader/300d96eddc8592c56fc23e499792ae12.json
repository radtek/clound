{"remainingRequest":"G:\\intellij work\\micro-ui\\node_modules\\babel-loader\\lib\\index.js!G:\\intellij work\\micro-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!G:\\intellij work\\micro-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\intellij work\\micro-ui\\src\\views\\portal\\archive\\contact\\contactList.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\intellij work\\micro-ui\\src\\views\\portal\\archive\\contact\\contactList.vue","mtime":1560132717987},{"path":"G:\\intellij work\\micro-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\intellij work\\micro-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"G:\\intellij work\\micro-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\intellij work\\micro-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _Object$assign from \"G:\\\\intellij work\\\\micro-ui\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/object/assign\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { tableOption, formOption } from '@/const/crud/portal/archive/contact/contact';\nimport { fetchGlList, fetchList, addObj } from \"@/api/portal/archive/contact/contact\";\nimport { fetchDictTree } from \"@/api/admin/dict\";\nimport { fetchArea } from '@/api/portal/archive/common-query/query';\nexport default {\n  name: 'contactList',\n  props: [\"contactForm\"],\n  data: function data() {\n    return {\n      listQuery: {\n        qtdwbh: ''\n      },\n      //场所关联列表查询条件\n      form: {},\n      formTitle: '',\n      //添加关联弹窗标题\n      showForm: false,\n      applyToBody: true,\n      tableLoading: false,\n      page: {\n        total: 0,\n        // 总页数\n        currentPage: 1,\n        // 当前页数\n        pageSize: 10 // 每页显示多少条\n\n      },\n      tableData: [],\n      option: tableOption,\n      //关联列表\n      formData: [],\n      formOption: formOption,\n      //添加要关联的场所列表\n      formPage: {\n        total: 0,\n        // 总页数\n        currentPage: 1,\n        // 当前页数\n        pageSize: 10 // 每页显示多少条\n\n      },\n      formLoading: false,\n      glForm: {},\n      searchForm: {\n        lyxtType: undefined,\n        qtdwbh: undefined,\n        sspcs: undefined,\n        areaCode: undefined,\n        dwmc: undefined,\n        address: undefined,\n        hylx: ''\n      },\n      //场所关联 自定义搜索\n      hylxTreeData: [],\n      hylxTreeProps: {\n        label: \"label\",\n        value: 'value'\n      },\n      hylxQuery: {\n        type: 'HYLX'\n      },\n      xzqhTreeData: [],\n      xzqhTreeProps: {\n        label: \"name\",\n        value: 'code'\n      },\n      selData: [] //选中的要关联的场所数据\n\n    };\n  },\n  created: function created() {\n    this.listQuery.qtdwbh = this.contactForm.qtdwbh;\n    this.getGlList(this.page, this.listQuery);\n    this.getHylxData();\n    this.getXzqhData();\n  },\n  computed: {},\n  methods: {\n    getGlList: function getGlList(page, params) {\n      var _this = this;\n\n      this.tableData = [];\n      this.tableLoading = true;\n      fetchGlList(_Object$assign({\n        current: page.currentPage,\n        size: page.pageSize\n      }, params)).then(function (response) {\n        _this.tableData = response.data.data.records;\n        _this.page.total = response.data.data.total;\n        _this.tableLoading = false;\n      });\n    },\n    addContact: function addContact() {\n      this.formTitle = \"添加关联\";\n      this.showForm = true;\n      this.searchForm.lyxtType = this.contactForm.lyxtType;\n      this.searchForm.qtdwbh = this.contactForm.qtdwbh;\n      this.searchForm.dwmc = this.contactForm.dwmc;\n      this.searchForm.hylx = this.contactForm.hylx;\n      this.searchForm.address = this.contactForm.address;\n      this.searchForm.areaCode = this.contactForm.areaCode;\n      this.searchForm.sspcs = this.contactForm.sspcs;\n      this.getFormList(this.formPage, this.searchForm);\n    },\n    getFormList: function getFormList(formPage, params) {\n      var _this2 = this;\n\n      this.formData = [];\n      this.formLoading = true;\n      fetchList(_Object$assign({\n        current: formPage.currentPage,\n        size: formPage.pageSize\n      }, params)).then(function (response) {\n        _this2.formData = response.data.data.records;\n        _this2.formPage.total = response.data.data.total;\n        _this2.formLoading = false;\n      });\n    },\n    getHylxData: function getHylxData() {\n      var _this3 = this;\n\n      this.hylxTreeData = [];\n      fetchDictTree(this.hylxQuery).then(function (response) {\n        _this3.hylxTreeData = response.data.data;\n      });\n    },\n    getXzqhData: function getXzqhData() {\n      var _this4 = this;\n\n      this.xzqhTreeData = [];\n      fetchArea().then(function (response) {\n        _this4.xzqhTreeData = response.data.data;\n      });\n    },\n    selectionChange: function selectionChange(data) {\n      this.selData = data;\n    },\n    refreshChange: function refreshChange() {\n      this.getFormList(this.formPage, this.searchForm);\n    },\n    searchChange: function searchChange() {\n      this.formPage.page = 1;\n      this.getFormList(this.formPage, this.searchForm);\n    },\n    importData: function importData() {\n      var _this5 = this;\n\n      if (this.selData.length > 0) {\n        this.$confirm('确认关联?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(function () {\n          var defineForm = {};\n          var ids = \"\";\n\n          for (var i = 0; i < _this5.selData.length; i++) {\n            ids += _this5.selData[i].dwbh + \",\";\n          }\n\n          defineForm['qtdwbh'] = _this5.listQuery.qtdwbh;\n          defineForm['lyxtType'] = '0';\n          defineForm['dwbh'] = ids;\n          addObj(defineForm).then(function () {\n            _this5.showForm = false;\n\n            _this5.getGlList(_this5.formPage, _this5.listQuery);\n\n            _this5.$notify({\n              title: \"成功\",\n              message: \"场所关联成功\",\n              type: \"success\",\n              duration: 2000\n            });\n          });\n        });\n      } else {\n        this.$message({\n          showClose: true,\n          message: '请选择要关联的数据',\n          type: 'warning'\n        });\n      }\n    },\n    clearForm: function clearForm() {\n      this.searchForm.dwmc = '';\n      this.searchForm.hylx = '';\n      this.searchForm.address = '';\n      this.searchForm.areaCode = '';\n    }\n  },\n  watch: {\n    contactForm: {\n      //深度监控父组件传递过来的值、否则无法根据传递过来的值更新数据\n      handler: function handler() {\n        this.listQuery.qtdwbh = this.contactForm.qtdwbh;\n        this.getGlList(this.page, this.listQuery);\n        this.getHylxData();\n        this.getXzqhData();\n      },\n      deep: true\n    }\n  }\n};",{"version":3,"sources":["contactList.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n <div class=\"execution\">\n   <basic-container>\n    <avue-crud :option=\"option\"\n               :data=\"tableData\"\n               v-model=\"form\"\n               ref=\"crud\"\n               :page=\"page\"\n               @on-load=\"getGlList\"\n               :table-loading=\"tableLoading\">\n        <template slot=\"menuLeft\">\n            <el-button @click=\"addContact\"\n                       icon=\"el-icon-plus\"\n                       type=\"primary\"\n                       size=\"small\">添加关联</el-button>\n        </template>\n    </avue-crud>\n   </basic-container>\n\n     <el-dialog :title=\"formTitle\" fullscreen :visible.sync=\"showForm\"  :append-to-body=\"applyToBody\">\n         <avue-crud :option=\"formOption\"\n                    :data=\"formData\"\n                    v-model=\"glForm\"\n                    ref=\"contact\"\n                    :page=\"formPage\"\n                    @search-reset=\"clearForm\"\n                    @search-change=\"searchChange\"\n                    @refresh-change=\"refreshChange\"\n                    :table-loading=\"formLoading\"\n                    @selection-change=\"selectionChange\">\n             <template slot=\"search\">\n                 <el-form-item label=\"场所名称\">\n                     <el-input\n                             placeholder=\"请输入内容\"\n                             v-model=\"searchForm.dwmc\"\n                             clearable>\n                     </el-input>\n                 </el-form-item>\n                 <el-form-item label=\"经营地址\">\n                     <el-input\n                             placeholder=\"请输入内容\"\n                             v-model=\"searchForm.address\"\n                             clearable>\n                     </el-input>\n                 </el-form-item>\n                 <el-form-item label=\"行业类型\">\n                     <avue-input v-model=\"searchForm.hylx\"\n                                 type=\"tree\"\n                                 placeholder=\"\"\n                                 expandLevel=\"1\"\n                                 :dic=\"hylxTreeData\"\n                                 :props=\"hylxTreeProps\">\n                     </avue-input>\n                 </el-form-item>\n                 <el-form-item label=\"行政区划\">\n                     <avue-input v-model=\"searchForm.areaCode\"\n                                 type=\"tree\"\n                                 placeholder=\"\"\n                                 expandLevel=\"1\"\n                                 :dic=\"xzqhTreeData\"\n                                 :props=\"xzqhTreeProps\">\n                     </avue-input>\n                 </el-form-item>\n             </template>\n             <template slot=\"menuLeft\">\n                 <el-button @click=\"importData\"\n                            icon=\"el-icon-plus\"\n                            type=\"primary\"\n                            size=\"small\">关联</el-button>\n             </template>\n         </avue-crud>\n\n     </el-dialog>\n\n    </div>\n</template>\n\n\n<script>\n    import {tableOption,formOption} from '@/const/crud/portal/archive/contact/contact';\n    import {fetchGlList,fetchList,addObj} from \"@/api/portal/archive/contact/contact\";\n    import {fetchDictTree} from \"@/api/admin/dict\";\n    import {fetchArea} from '@/api/portal/archive/common-query/query'\n\n    export default {\n        name:'contactList',\n        props:[\"contactForm\"],\n        data(){\n            return {\n                listQuery:{\n                    qtdwbh:'',\n                },//场所关联列表查询条件\n                form:{},\n                formTitle:'',//添加关联弹窗标题\n                showForm:false,\n                applyToBody: true,\n\n                tableLoading: false,\n                page: {\n                    total: 0, // 总页数\n                    currentPage: 1, // 当前页数\n                    pageSize: 10 // 每页显示多少条\n                },\n                tableData: [],\n                option:tableOption,//关联列表\n\n                formData:[],\n                formOption:formOption,//添加要关联的场所列表\n                formPage:{\n                    total: 0, // 总页数\n                    currentPage: 1, // 当前页数\n                    pageSize: 10 // 每页显示多少条\n                },\n                formLoading:false,\n                glForm:{},\n                searchForm:{\n                    lyxtType:undefined,\n                    qtdwbh:undefined,\n                    sspcs:undefined,\n                    areaCode:undefined,\n                    dwmc:undefined,\n                    address:undefined,\n                    hylx:'',\n                },//场所关联 自定义搜索\n                hylxTreeData:[],\n                hylxTreeProps: {\n                    label: \"label\",\n                    value: 'value',\n                },\n                hylxQuery: {\n                    type: 'HYLX'\n                },\n                xzqhTreeData:[],\n                xzqhTreeProps: {\n                    label: \"name\",\n                    value: 'code'\n                },\n                selData: [],//选中的要关联的场所数据\n            }\n        },\n        created(){\n            this.listQuery.qtdwbh = this.contactForm.qtdwbh\n            this.getGlList(this.page, this.listQuery)\n            this.getHylxData()\n            this.getXzqhData()\n        },\n        computed: {\n\n        },\n        methods:{\n            getGlList(page, params) {\n                this.tableData=[]\n                this.tableLoading = true;\n                fetchGlList(Object.assign({\n                    current: page.currentPage,\n                    size: page.pageSize\n                }, params)).then(response => {\n                    this.tableData = response.data.data.records;\n                    this.page.total = response.data.data.total\n                    this.tableLoading = false;\n                });\n            },\n            addContact(){\n                this.formTitle=\"添加关联\"\n                this.showForm=true\n                this.searchForm.lyxtType=this.contactForm.lyxtType\n                this.searchForm.qtdwbh=this.contactForm.qtdwbh\n                this.searchForm.dwmc=this.contactForm.dwmc\n                this.searchForm.hylx = this.contactForm.hylx\n                this.searchForm.address = this.contactForm.address\n                this.searchForm.areaCode = this.contactForm.areaCode\n                this.searchForm.sspcs = this.contactForm.sspcs\n                this.getFormList(this.formPage,this.searchForm)\n            },\n            getFormList(formPage, params) {\n                this.formData=[]\n                this.formLoading = true;\n                fetchList(Object.assign({\n                    current: formPage.currentPage,\n                    size: formPage.pageSize\n                }, params)).then(response => {\n                    this.formData = response.data.data.records;\n                    this.formPage.total = response.data.data.total\n                    this.formLoading = false;\n                });\n            },\n            getHylxData(){\n                this.hylxTreeData=[]\n                fetchDictTree(this.hylxQuery).then(response => {\n                    this.hylxTreeData = response.data.data\n                })\n            },\n            getXzqhData(){\n                this.xzqhTreeData=[]\n                fetchArea().then(response => {\n                    this.xzqhTreeData = response.data.data\n                })\n            },\n            selectionChange(data){\n                this.selData = data\n            },\n            refreshChange() {\n                this.getFormList(this.formPage, this.searchForm)\n            },\n            searchChange() {\n                this.formPage.page = 1;\n                this.getFormList(this.formPage, this.searchForm)\n            },\n            importData(){\n                if(this.selData.length > 0){\n                    this.$confirm('确认关联?', '提示', {\n                        confirmButtonText: '确定',\n                        cancelButtonText: '取消',\n                        type: 'warning'\n                    }).then(() => {\n                        let defineForm ={}\n                        let ids = \"\"\n                        for(let i = 0; i < this.selData.length; i++){\n                            ids += this.selData[i].dwbh + \",\"\n                        }\n                        defineForm['qtdwbh']=this.listQuery.qtdwbh\n                        defineForm['lyxtType']='0'\n                        defineForm['dwbh']=ids\n                        addObj(defineForm).then(() => {\n                            this.showForm = false;\n                            this.getGlList(this.formPage,this.listQuery)\n                            this.$notify({\n                                title: \"成功\",\n                                message: \"场所关联成功\",\n                                type: \"success\",\n                                duration: 2000\n                            });\n                        })\n                    })\n                }else {\n                    this.$message({\n                        showClose: true,\n                        message: '请选择要关联的数据',\n                        type: 'warning'\n                    })\n                }\n            },\n            clearForm(){\n                this.searchForm.dwmc=''\n                this.searchForm.hylx=''\n                this.searchForm.address=''\n                this.searchForm.areaCode=''\n            },\n\n        },\n\n        watch: {\n            contactForm: {\n                //深度监控父组件传递过来的值、否则无法根据传递过来的值更新数据\n                handler() {\n                    this.listQuery.qtdwbh = this.contactForm.qtdwbh\n                    this.getGlList(this.page,this.listQuery);\n                    this.getHylxData()\n                    this.getXzqhData()\n                },\n                deep: true\n            },\n        }\n    }\n</script>"],"sourceRoot":"src/views/portal/archive/contact"}]}