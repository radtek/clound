{"remainingRequest":"E:\\intellij work\\micro-ui\\node_modules\\babel-loader\\lib\\index.js!E:\\intellij work\\micro-ui\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\intellij work\\micro-ui\\src\\api\\admin\\file.js","dependencies":[{"path":"E:\\intellij work\\micro-ui\\src\\api\\admin\\file.js","mtime":1552876440610},{"path":"E:\\intellij work\\micro-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\intellij work\\micro-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\intellij work\\micro-ui\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import request from '@/router/axios';\n/**\r\n * 分页获取文件列表\r\n * @param query\r\n */\n\nexport function fetchFileList(query) {\n  return request({\n    url: '/admin/file/page',\n    method: 'get',\n    params: query\n  });\n}\n/**\r\n * 根据文件id获取文件\r\n * @param id 文件id\r\n */\n\nexport function getObj(id) {\n  return request({\n    url: '/admin/file/' + id,\n    method: 'get'\n  });\n}\n/**\r\n * 文件删除\r\n * @param id\r\n */\n\nexport function delObj(id) {\n  return request({\n    url: '/admin/file/' + id,\n    method: 'delete'\n  });\n}\n/**\r\n * 获取文件列表\r\n * @param obj\r\n */\n\nexport function getList(obj) {\n  return request({\n    url: '/admin/file/list',\n    method: 'get',\n    data: obj\n  });\n}\n/**\r\n * 文件下载\r\n * @param id 文件id\r\n * @param fileName 文件名称\r\n * @param dialog 窗口对象\r\n */\n\nexport function download(id, fileName, dialog) {\n  axios({\n    method: 'get',\n    url: '/admin/file/' + id,\n    data: {},\n    responseType: 'blob'\n  }).then(function (res) {\n    console.log(\"res\" + res);\n    doDownload(res, fileName);\n  }).catch(function (error) {\n    console.log(\"失败\" + error);\n    dialog({\n      showClose: true,\n      message: '文件下载失败' + error,\n      type: 'error'\n    });\n  });\n}\n\nfunction doDownload(res, fileName) {\n  if (!res) {\n    return;\n  }\n\n  var blob = new Blob([res.data]);\n  var url = window.URL.createObjectURL(blob);\n  var link = document.createElement('a');\n  link.style.display = 'none';\n  link.href = url;\n  link.setAttribute('download', fileName);\n  document.body.appendChild(link);\n  link.click();\n}",{"version":3,"sources":["E:\\intellij work\\micro-ui\\src\\api\\admin\\file.js"],"names":["request","fetchFileList","query","url","method","params","getObj","id","delObj","getList","obj","data","download","fileName","dialog","axios","responseType","then","res","console","log","doDownload","catch","error","showClose","message","type","blob","Blob","window","URL","createObjectURL","link","document","createElement","style","display","href","setAttribute","body","appendChild","click"],"mappings":"AACA,OAAOA,OAAP,MAAoB,gBAApB;AAEA;;;;;AAIA,OAAO,SAASC,aAAT,CAAwBC,KAAxB,EAA+B;AAClC,SAAOF,OAAO,CAAC;AACXG,IAAAA,GAAG,EAAE,kBADM;AAEXC,IAAAA,MAAM,EAAE,KAFG;AAGXC,IAAAA,MAAM,EAAEH;AAHG,GAAD,CAAd;AAKH;AAED;;;;;AAIA,OAAO,SAASI,MAAT,CAAiBC,EAAjB,EAAqB;AACxB,SAAOP,OAAO,CAAC;AACXG,IAAAA,GAAG,EAAE,iBAAiBI,EADX;AAEXH,IAAAA,MAAM,EAAE;AAFG,GAAD,CAAd;AAIH;AAED;;;;;AAIA,OAAO,SAASI,MAAT,CAAiBD,EAAjB,EAAqB;AACxB,SAAOP,OAAO,CAAC;AACXG,IAAAA,GAAG,EAAE,iBAAiBI,EADX;AAEXH,IAAAA,MAAM,EAAE;AAFG,GAAD,CAAd;AAIH;AAED;;;;;AAIA,OAAO,SAASK,OAAT,CAAkBC,GAAlB,EAAuB;AAC1B,SAAOV,OAAO,CAAC;AACXG,IAAAA,GAAG,EAAE,kBADM;AAEXC,IAAAA,MAAM,EAAE,KAFG;AAGXO,IAAAA,IAAI,EAAED;AAHK,GAAD,CAAd;AAKH;AAED;;;;;;;AAMA,OAAO,SAASE,QAAT,CAAkBL,EAAlB,EAAsBM,QAAtB,EAAgCC,MAAhC,EAAwC;AAC3CC,EAAAA,KAAK,CAAC;AACFX,IAAAA,MAAM,EAAE,KADN;AAEFD,IAAAA,GAAG,EAAE,iBAAiBI,EAFpB;AAGFI,IAAAA,IAAI,EAAE,EAHJ;AAIFK,IAAAA,YAAY,EAAE;AAJZ,GAAD,CAAL,CAKGC,IALH,CAKQ,UAAAC,GAAG,EAAI;AACXC,IAAAA,OAAO,CAACC,GAAR,CAAY,QAAQF,GAApB;AACAG,IAAAA,UAAU,CAACH,GAAD,EAAML,QAAN,CAAV;AACH,GARD,EAQGS,KARH,CAQS,UAACC,KAAD,EAAW;AAChBJ,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAOG,KAAnB;AACAT,IAAAA,MAAM,CAAC;AACHU,MAAAA,SAAS,EAAE,IADR;AAEHC,MAAAA,OAAO,EAAE,WAAWF,KAFjB;AAGHG,MAAAA,IAAI,EAAE;AAHH,KAAD,CAAN;AAKH,GAfD;AAgBH;;AAED,SAASL,UAAT,CAAoBH,GAApB,EAAyBL,QAAzB,EAAmC;AAC/B,MAAI,CAACK,GAAL,EAAU;AACN;AACH;;AACD,MAAIS,IAAI,GAAG,IAAIC,IAAJ,CAAS,CAACV,GAAG,CAACP,IAAL,CAAT,CAAX;AACA,MAAIR,GAAG,GAAG0B,MAAM,CAACC,GAAP,CAAWC,eAAX,CAA2BJ,IAA3B,CAAV;AAEA,MAAIK,IAAI,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAX;AACAF,EAAAA,IAAI,CAACG,KAAL,CAAWC,OAAX,GAAqB,MAArB;AACAJ,EAAAA,IAAI,CAACK,IAAL,GAAYlC,GAAZ;AACA6B,EAAAA,IAAI,CAACM,YAAL,CAAkB,UAAlB,EAA8BzB,QAA9B;AAEAoB,EAAAA,QAAQ,CAACM,IAAT,CAAcC,WAAd,CAA0BR,IAA1B;AACAA,EAAAA,IAAI,CAACS,KAAL;AACH","sourcesContent":["\r\nimport request from '@/router/axios'\r\n\r\n/**\r\n * 分页获取文件列表\r\n * @param query\r\n */\r\nexport function fetchFileList (query) {\r\n    return request({\r\n        url: '/admin/file/page',\r\n        method: 'get',\r\n        params: query\r\n    })\r\n}\r\n\r\n/**\r\n * 根据文件id获取文件\r\n * @param id 文件id\r\n */\r\nexport function getObj (id) {\r\n    return request({\r\n        url: '/admin/file/' + id,\r\n        method: 'get'\r\n    })\r\n}\r\n\r\n/**\r\n * 文件删除\r\n * @param id\r\n */\r\nexport function delObj (id) {\r\n    return request({\r\n        url: '/admin/file/' + id,\r\n        method: 'delete'\r\n    })\r\n}\r\n\r\n/**\r\n * 获取文件列表\r\n * @param obj\r\n */\r\nexport function getList (obj) {\r\n    return request({\r\n        url: '/admin/file/list',\r\n        method: 'get',\r\n        data: obj\r\n    })\r\n}\r\n\r\n/**\r\n * 文件下载\r\n * @param id 文件id\r\n * @param fileName 文件名称\r\n * @param dialog 窗口对象\r\n */\r\nexport function download(id, fileName, dialog) {\r\n    axios({\r\n        method: 'get',\r\n        url: '/admin/file/' + id,\r\n        data: {},\r\n        responseType: 'blob'\r\n    }).then(res => {\r\n        console.log(\"res\" + res)\r\n        doDownload(res, fileName)\r\n    }).catch((error) => {\r\n        console.log(\"失败\" + error)\r\n        dialog({\r\n            showClose: true,\r\n            message: '文件下载失败' + error,\r\n            type: 'error'\r\n        })\r\n    })\r\n}\r\n\r\nfunction doDownload(res, fileName) {\r\n    if (!res) {\r\n        return\r\n    }\r\n    let blob = new Blob([res.data])\r\n    let url = window.URL.createObjectURL(blob)\r\n\r\n    let link = document.createElement('a')\r\n    link.style.display = 'none'\r\n    link.href = url\r\n    link.setAttribute('download', fileName)\r\n\r\n    document.body.appendChild(link)\r\n    link.click()\r\n}"]}]}