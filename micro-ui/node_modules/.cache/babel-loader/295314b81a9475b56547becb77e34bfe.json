{"remainingRequest":"G:\\intellij work\\micro-ui\\node_modules\\babel-loader\\lib\\index.js!G:\\intellij work\\micro-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!G:\\intellij work\\micro-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\intellij work\\micro-ui\\src\\views\\portal\\archive\\lvye\\hotel\\detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\intellij work\\micro-ui\\src\\views\\portal\\archive\\lvye\\hotel\\detail.vue","mtime":1559610000765},{"path":"G:\\intellij work\\micro-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\intellij work\\micro-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"G:\\intellij work\\micro-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\intellij work\\micro-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _Object$assign from \"G:\\\\intellij work\\\\micro-ui\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/object/assign\";\nimport _Map from \"G:\\\\intellij work\\\\micro-ui\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/map\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { findOneHotel } from \"@/api/portal/archive/lvye/hotel\";\nimport { findEmployeePage, monthCount, getImg } from \"@/api/portal/archive/lvye/employee\";\nimport '@/styles/portal/archive/place-detail.scss';\nimport employeeDetail from '../employee/employeeDetail';\nimport { findLabel, getDict, getLabel } from \"@/api/portal/archive/dict/dict\";\nimport { remote } from \"@/api/admin/dict\";\nexport default {\n  components: {\n    employeeDetail: employeeDetail\n  },\n  name: 'hotelDetail',\n  props: [\"paramForm\"],\n  data: function data() {\n    return {\n      detailForm: {},\n      imgMap: new _Map(),\n      employeeView: false,\n      employeeDetail: {},\n      searchFrom: {\n        dwbh: undefined,\n        menuId: undefined\n      },\n      countNum: {\n        quit: 0,\n        inc: 0\n      },\n      tableLoading: true,\n      collectLoading: false,\n      appleToBody: true,\n      url: undefined,\n      page: {\n        total: 0,\n        // 总页数\n        currentPage: 1,\n        // 当前页数\n        pageSize: 5 // 每页显示多少条\n\n      },\n      dialogTableVisible: false,\n      dialogTablePlaceVisible: false,\n      employeeData: [],\n      sexDictData: [],\n      gwDictData: [],\n      pointTypeData: []\n    };\n  },\n  created: function created() {\n    this.employeeDictData();\n    this.hotelDictData();\n    this.searchFrom.dwbh = this.paramForm.unitId;\n    this.searchFrom.menuId = this.paramForm.menuId;\n    this.findHotelDetail(this.searchFrom);\n    this.findEmployee(this.page, this.searchFrom);\n    this.employeeCount(this.searchFrom.dwbh);\n  },\n  watch: {\n    paramForm: {\n      //深度监控父组件传递过来的值、否则无法根据传递过来的值更新数据\n      handler: function handler() {\n        this.searchFrom.dwbh = this.paramForm.unitId;\n        this.searchFrom.menuId = this.paramForm.menuId;\n        this.findHotelDetail(this.searchFrom);\n        this.findEmployee(this.page, this.searchFrom);\n        this.employeeCount(this.searchFrom.dwbh);\n      },\n      deep: true\n    }\n  },\n  methods: {\n    closeDialog: function closeDialog() {\n      this.employeeView = false;\n      this.imgMap.clear();\n    },\n    editCollect: function editCollect() {\n      this.$message({\n        type: 'success',\n        dangerouslyUseHTMLString: true,\n        duration: 4000,\n        message: '操作成功'\n      });\n      this.collectLoading = true;\n      alert('收藏信息');\n      this.collectLoading = false;\n    },\n    initDict: function initDict() {\n      var _this = this;\n\n      findLabel('LGLB', 'ly', this.detailForm.hotelKind).then(function (value) {\n        _this.detailForm.hotelKind = value;\n      }).catch(function (err) {});\n      findLabel('0209', 'ly', this.detailForm.state).then(function (value) {\n        _this.detailForm.state = value;\n      }).catch(function (err) {});\n      findLabel('0210', 'ly', this.detailForm.stars).then(function (value) {\n        _this.detailForm.stars = value;\n      }).catch(function (err) {});\n      findLabel('0211', 'ly', this.detailForm.grade).then(function (value) {\n        _this.detailForm.grade = value;\n      }).catch(function (err) {});\n    },\n    sexDict: function sexDict(row, column) {\n      return getLabel(this.sexDictData, row.xb);\n    },\n    gwDict: function gwDict(row, column) {\n      return getLabel(this.gwDictData, row.gzgw);\n    },\n    pointDict: function pointDict() {\n      return getLabel(this.pointTypeData, this.detailForm.pointType);\n    },\n    viewEmployeeDialog: function viewEmployeeDialog(row) {\n      this.employeeView = true;\n      this.employeeDetail = row;\n    },\n    employeeDictData: function employeeDictData() {\n      var _this2 = this;\n\n      getDict('GZGW', 'ly').then(function (response) {\n        _this2.gwDictData = response.data.data || [];\n      }).catch(function (err) {});\n      getDict('0122', 'ly').then(function (response) {\n        _this2.sexDictData = response.data.data || [];\n      }).catch(function (err) {});\n    },\n    hotelDictData: function hotelDictData() {\n      var _this3 = this;\n\n      remote('jfdj').then(function (response) {\n        _this3.pointTypeData = response.data.data || {};\n      }).catch(function (err) {});\n    },\n    initImg: function initImg(id, code) {\n      var img = this.imgMap.get(id);\n\n      if (null === img || 'undefined' === typeof img || '' === img) {\n        getImg(id, code);\n        this.imgMap.set(id, id);\n      }\n    },\n    findHotelDetail: function findHotelDetail(form) {\n      var _this4 = this;\n\n      findOneHotel(_Object$assign({}, form)).then(function (response) {\n        _this4.detailForm = response.data.data;\n\n        _this4.initDict();\n      });\n    },\n    findEmployee: function findEmployee(page, form) {\n      var _this5 = this;\n\n      this.imgMap.clear();\n      this.tableLoading = true;\n      findEmployeePage(_Object$assign({\n        current: page.currentPage,\n        size: page.pageSize,\n        quitType: '20'\n      }, form)).then(function (response) {\n        _this5.employeeData = response.data.data.records;\n        _this5.page.total = response.data.data.total;\n        _this5.tableLoading = false;\n      });\n    },\n    employeeCount: function employeeCount(unitId) {\n      var _this6 = this;\n\n      monthCount(unitId).then(function (response) {\n        _this6.countNum = response.data.data;\n      });\n    },\n    moreClick: function moreClick() {\n      this.$emit(\"moreClick\", 1);\n    },\n    cellStyle: function cellStyle(_ref) {\n      var row = _ref.row,\n          column = _ref.column,\n          rowIndex = _ref.rowIndex,\n          columnIndex = _ref.columnIndex;\n\n      if (columnIndex === 3) {\n        return 'color:#6aaff8';\n      } else {\n        return '';\n      }\n    },\n    snxxStyle: function snxxStyle(_ref2) {\n      var row = _ref2.row,\n          column = _ref2.column,\n          rowIndex = _ref2.rowIndex,\n          columnIndex = _ref2.columnIndex;\n\n      if (columnIndex === 0) {\n        return 'color:#6aaff8';\n      } else {\n        return '';\n      }\n    },\n    facecellStyle: function facecellStyle(_ref3) {\n      var row = _ref3.row,\n          column = _ref3.column,\n          rowIndex = _ref3.rowIndex,\n          columnIndex = _ref3.columnIndex;\n\n      if (columnIndex === 2) {\n        return 'color:#6aaff8';\n      } else if (columnIndex === 0) {\n        return 'text-align:center';\n      } else {\n        return '';\n      }\n    }\n  }\n};",{"version":3,"sources":["detail.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div class=\"info-cate\">\r\n        <div class=\"fileInfo_main\">\r\n            <!--基础信息-->\r\n            <el-form class=\"form-main\">\r\n                <el-row class=\"form-main-title\">\r\n                    <span class=\"main-title-name\" v-text=\"detailForm.hname\"> </span>\r\n                    <span class=\"main-title-score\" v-text=\"detailForm.pointScore+' 分'\">90分</span>\r\n                    <span class=\"main-title-level main-title-score\" v-text=\" pointDict()\">A级</span>\r\n                    <a href=\"javascript:void(0)\"  v-loading=\"collectLoading\">\r\n                        <span class=\"main-title-wsc\" @click=\"editCollect\"><i class=\"iconfontlogo alicon_shoucang\"></i>未收藏</span>\r\n                    </a>\r\n                   <!-- <a href=\"#\" v-if=\"yscshow\"><span class=\"main-title-ysc\" @click=\"editCollect\"><i\r\n                            class=\"iconfontlogo alicon_shoucang\"></i>已收藏</span></a>\r\n-->\r\n\r\n                </el-row>\r\n                <el-row class=\"form-main-body\">\r\n                    <el-col :span=\"18\" class=\"form-body-l form-body-tabel\">\r\n                        <el-form label-width=\"135px\" label-position=\"left\">\r\n                            <el-col>\r\n                                <el-col :span=\"8\">\r\n                                    <el-form-item label=\"行业类别\">\r\n                                        <span v-text=\"detailForm.placeType\"></span>\r\n                                    </el-form-item>\r\n                                </el-col>\r\n                                <el-col :span=\"8\">\r\n                                    <el-form-item label=\"旅馆类别\">\r\n                                        <span v-text=\"detailForm.hotelKind\"></span>\r\n                                    </el-form-item>\r\n                                </el-col>\r\n                                <el-col :span=\"8\">\r\n                                    <el-form-item label=\"企业状态\">\r\n                                        <span v-text=\"detailForm.state \"></span>\r\n                                    </el-form-item>\r\n                                </el-col>\r\n                            </el-col>\r\n\r\n                            <el-col>\r\n                                <el-col :span=\"8\">\r\n                                    <el-form-item label=\"星级\">\r\n                                        <span v-text=\"detailForm.stars\"></span>\r\n                                    </el-form-item>\r\n                                </el-col>\r\n                                <el-col :span=\"8\">\r\n                                    <el-form-item label=\"等级\">\r\n                                        <span v-text=\"detailForm.grade\"></span>\r\n                                    </el-form-item>\r\n                                </el-col>\r\n                                <el-col :span=\"8\">\r\n                                    <el-form-item label=\"联机时间\">\r\n                                        <span v-text=\"detailForm.linkDate\"></span>\r\n                                    </el-form-item>\r\n                                </el-col>\r\n                            </el-col>\r\n\r\n                            <el-col>\r\n                                <el-col :span=\"8\">\r\n                                    <el-form-item label=\"房间数\">\r\n                                        <span v-text=\"detailForm.roomNum\"></span>\r\n                                    </el-form-item>\r\n                                </el-col>\r\n                                <el-col :span=\"8\">\r\n                                    <el-form-item label=\"床位数\">\r\n                                        <span v-text=\"detailForm.floors\"></span>\r\n                                    </el-form-item>\r\n                                </el-col>\r\n                                <el-col :span=\"8\">\r\n                                    <el-form-item label=\"组织机构代码\">\r\n                                        <span v-text=\"detailForm.psorgan\"></span>\r\n                                    </el-form-item>\r\n                                </el-col>\r\n                            </el-col>\r\n                            <el-col>\r\n                                <el-col :span=\"8\">\r\n                                    <el-form-item label=\"管辖派出所\">\r\n                                        <span v-text=\"detailForm.psCode\"></span>\r\n                                    </el-form-item>\r\n                                </el-col>\r\n                                <el-col :span=\"8\">\r\n                                    <el-form-item label=\"责任民警名称\">\r\n                                        <span v-text=\"detailForm.socialDuty\"></span>\r\n                                    </el-form-item>\r\n                                </el-col>\r\n                                <el-col :span=\"8\">\r\n                                    <el-form-item label=\"责任民警警号\">\r\n                                        <span v-text=\"detailForm.socialDuty\"></span>\r\n                                    </el-form-item>\r\n                                </el-col>\r\n                            </el-col>\r\n                            <el-col>\r\n                                <el-col :span=\"8\">\r\n                                    <el-form-item label=\"法定负责人\">\r\n                                        <span v-text=\"detailForm.legalPerson\"></span>\r\n                                    </el-form-item>\r\n                                </el-col>\r\n                                <el-col :span=\"8\">\r\n                                    <el-form-item label=\"经营负责人\">\r\n                                        <span v-text=\"detailForm.principal\"></span>\r\n                                    </el-form-item>\r\n                                </el-col>\r\n                                <el-col :span=\"8\">\r\n                                    <el-form-item label=\"治安负责人\">\r\n                                        <span v-text=\"detailForm.socialDuty\"></span>\r\n                                    </el-form-item>\r\n                                </el-col>\r\n                            </el-col>\r\n\r\n                            <el-col>\r\n                                <el-col :span=\"8\">\r\n                                    <el-form-item label=\"详细地址\">\r\n                                        <span v-text=\"detailForm.haddress\"></span>\r\n                                    </el-form-item>\r\n                                </el-col>\r\n                                <el-col :span=\"8\">\r\n                                    <el-form-item label=\"联系电话\">\r\n                                        <span v-text=\"detailForm.telPhone\"></span>\r\n                                    </el-form-item>\r\n                                </el-col>\r\n\r\n                            </el-col>\r\n\r\n                        </el-form>\r\n                    </el-col>\r\n                    <el-col :span=\"6\" class=\"form-body-r\">\r\n                        <img src=\"/img/unit.jpg\" alt=\"\">\r\n                    </el-col>\r\n                </el-row>\r\n            </el-form>\r\n            <!--卡片切换-->\r\n            <el-tabs type=\"border-card\" class=\"card-tab\">\r\n                <el-tab-pane label=\"异常警告\">\r\n                    <ul>\r\n                        <li>1</li>\r\n                        <li>[治安管理]</li>\r\n                        <li><a href=\"#\">从业人员一个月没有变动</a></li>\r\n                        <li>2019-05-15 11:18:00</li>\r\n                    </ul>\r\n                    <ul>\r\n                        <li>1</li>\r\n                        <li>[治安管理]</li>\r\n                        <li><a href=\"#\">从业人员一个月没有变动</a></li>\r\n                        <li>2019-05-15 11:18:00</li>\r\n                    </ul>\r\n                    <ul>\r\n                        <li>1</li>\r\n                        <li>[治安管理]</li>\r\n                        <li><a href=\"#\">从业人员一个月没有变动</a></li>\r\n                        <li>2019-05-15 11:18:00</li>\r\n                    </ul>\r\n                    <ul>\r\n                        <li>1</li>\r\n                        <li>[治安管理]</li>\r\n                        <li><a href=\"#\">从业人员一个月没有变动</a></li>\r\n                        <li>2019-05-15 11:18:00</li>\r\n                    </ul>\r\n                    <ul>\r\n                        <li>1</li>\r\n                        <li>[治安管理]</li>\r\n                        <li><a href=\" \">从业人员一个月没有变动</a></li>\r\n                        <li>2019-05-15 11:18:00</li>\r\n                    </ul>\r\n                </el-tab-pane>\r\n                <el-tab-pane label=\"平面图\">\r\n                    <img src=\"/img/unit.jpg\" alt=\"\" style=\"height: 170px;\">\r\n                </el-tab-pane>\r\n            </el-tabs>\r\n            <!--在岗人数列表-->\r\n            <div class=\"table-box\">\r\n                <el-row class=\"table-box-top\">\r\n                    <el-col :span=\"4\" class=\"box-top-item1\">在岗人数 <span v-text=\"page.total\"\r\n                                                                       v-loading=\"tableLoading\">0</span></el-col>\r\n                    <el-col :span=\"4\" class=\"box-top-item2\">本月新上岗 <span v-text=\"countNum.inc\"\r\n                                                                        v-loading=\"tableLoading\"></span>\r\n                        <span>人</span><i\r\n                                class=\"iconfontlogo aljiang1\"></i></el-col>\r\n                    <el-col :span=\"4\" class=\"box-top-item3\">本月离岗 <span v-text=\"countNum.quit\"\r\n                                                                       v-loading=\"tableLoading\"></span><span>人</span><i\r\n                            class=\"iconfontlogo aljiang\"></i></el-col>\r\n                    <el-col :span=\"12\" class=\"box-top-item4\">\r\n                        <el-button type=\"text\" @click=\"moreClick\">更多>></el-button>\r\n                    </el-col>\r\n                </el-row>\r\n                <el-table\r\n                        :header-cell-style=\"{background:'#eee',color:'#000'}\"\r\n                        :cell-style=\"cellStyle\"\r\n                        :row-style=\"{height:'90px'}\"\r\n                        :data=\"employeeData\"\r\n                        style=\"width: 100%\"\r\n                        :page=\"page\"\r\n                        v-loading=\"tableLoading\"\r\n                >\r\n                    <el-table-column\r\n                            width=\"50\"\r\n                            type=\"index\"\r\n                            label=\"序号\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"imgUrl\"\r\n                            label=\"照片\"\r\n                            align=\"center\"\r\n                            width=\"100\"\r\n                    >\r\n                        <template  slot-scope=\"scope\">\r\n\r\n                           <img style=\"height:80px; width:80px;border-radius: 5px;\"\r\n                                 src=\"/img/people.png\"\r\n                                 :id=\"scope.row.psid\"\r\n                                 :src=\"initImg(scope.row.psid,scope.row.city)\"/>\r\n\r\n                        </template>\r\n                    </el-table-column>\r\n\r\n\r\n                    <el-table-column\r\n                            prop=\"xm\"\r\n                            label=\"姓名\">\r\n                        <template slot-scope=\"scope\">\r\n                            <button type=\"text\" class=\"el-button el-button--text el-button--small\"\r\n                                    @click=\"viewEmployeeDialog(scope.row)\">\r\n                                {{scope.row.xm}}\r\n                            </button>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"zjhm\"\r\n                            width=\"200\"\r\n                            label=\"证件号码\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"xb\"\r\n                            label=\"姓别\"\r\n                            :formatter =\"sexDict\"\r\n                    >\r\n\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"csrq\"\r\n                            min-width=\"120\"\r\n                            label=\"出生日期\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"gzgw\"\r\n                            label=\"岗位名称\"\r\n                            :formatter =\"gwDict\"\r\n                    >\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"lxfs1\"\r\n                            min-width=\"120\"\r\n                            label=\"联系电话\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            width=\"200\"\r\n                            prop=\"rylb\"\r\n                            label=\"从业人员类别\">\r\n                    </el-table-column>\r\n                </el-table>\r\n            </div>\r\n            <!--人脸识别-->\r\n            <div class=\"table-face\">\r\n                <div class=\"table-face-top\">\r\n                    <el-row>\r\n                        <el-col :span=\"20\" class=\"face-top-title\">\r\n                            人脸识别\r\n                        </el-col>\r\n                        <el-col :span=\"4\" class=\"face-top-more\">\r\n                            <el-button type=\"text\" @click=\"dialogTablePlaceVisible = true\">更多>></el-button>\r\n                        </el-col>\r\n                    </el-row>\r\n                </div>\r\n                <el-table\r\n                        class=\"table-face-body\"\r\n                        :header-cell-style=\"{background:'#eee',color:'#000'}\"\r\n                        :cell-style=\"facecellStyle\"\r\n                        :data=\"employeeData\"\r\n                        style=\"width: 100%\">\r\n                    <el-table-column\r\n                            width=\"50\"\r\n                            type=\"index\"\r\n                            label=\"序号\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"xm\"\r\n                            label=\"姓名\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"zjhm\"\r\n                            width=\"200\"\r\n                            label=\"证件号码\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"xb\"\r\n                            width=\"70\"\r\n                            label=\"姓别\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"csrq\"\r\n                            min-width=\"120\"\r\n                            label=\"出生日期\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"rybaLb\"\r\n                            label=\"人员类型\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"rybaDjsj\"\r\n                            min-width=\"120\"\r\n                            label=\"出现时间\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            width=\"200\"\r\n                            prop=\"rybaLb\"\r\n                            label=\"七类人员类型\">\r\n                    </el-table-column>\r\n                </el-table>\r\n            </div>\r\n            <!--地图区域-->\r\n            <div class=\"map table-face\">\r\n                <div class=\"table-face-top\">\r\n                    <el-row>\r\n                        <el-col :span=\"20\" class=\"face-top-title\">\r\n                            地图区域\r\n                        </el-col>\r\n                    </el-row>\r\n                </div>\r\n                <div class=\"map_box\">\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!--从业人员详情弹窗-->\r\n        <el-dialog title=\"详情\" :visible.sync=\"employeeView\" fullscreen :append-to-body=\"true\" @close='closeDialog'>\r\n            <employee-detail v-bind:detail-row=\"employeeDetail\"/>\r\n            <div slot=\"footer\"\r\n                 class=\"dialog-footer\">\r\n                <el-button type=\"primary\" @click=\"closeDialog\">关 闭\r\n                </el-button>\r\n            </div>\r\n\r\n        </el-dialog>\r\n        <el-dialog title=\"人脸识别\"\r\n                   width=\"80%\"\r\n                   :visible.sync=\"dialogTablePlaceVisible\">\r\n            <el-table\r\n                    class=\"table-face-body\"\r\n                    :header-cell-style=\"{background:'#eee',color:'#000'}\"\r\n                    :cell-style=\"facecellStyle\"\r\n                    :data=\"employeeData\"\r\n                    style=\"width: 100%\">\r\n                <el-table-column\r\n                        label=\"序号\"\r\n                        type=\"index\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"rybaMc\"\r\n                        label=\"姓名\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"rybaZjhm\"\r\n                        width=\"200\"\r\n                        label=\"证件号码\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"rybaXb\"\r\n\r\n                        label=\"姓别\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"rybaCsrq\"\r\n                        min-width=\"120\"\r\n                        label=\"出生日期\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"rybaLb\"\r\n                        label=\"人员类型\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"rybaDjsj\"\r\n                        min-width=\"120\"\r\n                        label=\"出现时间\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                        width=\"200\"\r\n                        prop=\"rybaLb\"\r\n                        label=\"七类人员类型\">\r\n                </el-table-column>\r\n            </el-table>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import {findOneHotel} from \"@/api/portal/archive/lvye/hotel\";\r\n    import {findEmployeePage, monthCount, getImg} from \"@/api/portal/archive/lvye/employee\";\r\n    import '@/styles/portal/archive/place-detail.scss'\r\n    import employeeDetail from '../employee/employeeDetail'\r\n    import {findLabel,getDict,getLabel}  from  \"@/api/portal/archive/dict/dict\";\r\n    import {remote}  from  \"@/api/admin/dict\";\r\n    export default {\r\n        components: {\r\n            employeeDetail\r\n        },\r\n        name: 'hotelDetail',\r\n        props: [\"paramForm\"],\r\n        data() {\r\n            return {\r\n                detailForm: {},\r\n                imgMap : new Map(),\r\n                employeeView: false,\r\n                employeeDetail: {},\r\n                searchFrom: {\r\n                    dwbh: undefined,\r\n                    menuId: undefined,\r\n                },\r\n                countNum: {\r\n                    quit: 0,\r\n                    inc: 0\r\n                },\r\n                tableLoading: true,\r\n                collectLoading:false,\r\n                appleToBody: true,\r\n                url: undefined,\r\n                page: {\r\n                    total: 0, // 总页数\r\n                    currentPage: 1, // 当前页数\r\n                    pageSize: 5 // 每页显示多少条\r\n                },\r\n                dialogTableVisible: false,\r\n                dialogTablePlaceVisible: false,\r\n                employeeData: [],\r\n                sexDictData:[],\r\n                gwDictData:[],\r\n                pointTypeData:[],\r\n            }\r\n        },\r\n        created() {\r\n\r\n            this.employeeDictData()\r\n            this.hotelDictData()\r\n            this.searchFrom.dwbh = this.paramForm.unitId;\r\n            this.searchFrom.menuId = this.paramForm.menuId;\r\n            this.findHotelDetail(this.searchFrom);\r\n            this.findEmployee(this.page, this.searchFrom);\r\n            this.employeeCount(this.searchFrom.dwbh);\r\n\r\n        },\r\n        watch: {\r\n            paramForm: {\r\n                //深度监控父组件传递过来的值、否则无法根据传递过来的值更新数据\r\n                handler() {\r\n\r\n                    this.searchFrom.dwbh = this.paramForm.unitId;\r\n                    this.searchFrom.menuId = this.paramForm.menuId;\r\n                    this.findHotelDetail(this.searchFrom);\r\n                    this.findEmployee(this.page, this.searchFrom);\r\n                    this.employeeCount(this.searchFrom.dwbh);\r\n\r\n\r\n                },\r\n                deep: true\r\n            },\r\n        },\r\n        methods: {\r\n            closeDialog(){\r\n                this.employeeView=false\r\n                this.imgMap.clear()\r\n            },\r\n            editCollect(){\r\n                this.$message({\r\n                    type:'success',\r\n                    dangerouslyUseHTMLString: true,\r\n                    duration:4000,\r\n                    message: '操作成功'\r\n                });\r\n                this.collectLoading=true\r\n                alert('收藏信息')\r\n                this.collectLoading=false\r\n            },\r\n\r\n\r\n            initDict(){\r\n\r\n                findLabel('LGLB','ly',this.detailForm.hotelKind).then(value=>{\r\n                    this.detailForm.hotelKind=value\r\n                }).catch((err) => {});\r\n                findLabel('0209','ly',this.detailForm.state).then(value=>{\r\n                    this.detailForm.state=value\r\n                }).catch((err) => {});\r\n                findLabel('0210','ly',this.detailForm.stars).then(value=>{\r\n                    this.detailForm.stars=value\r\n                }).catch((err) => {});\r\n                findLabel('0211','ly',this.detailForm.grade).then(value=>{\r\n                    this.detailForm.grade=value\r\n                }).catch((err) => {});\r\n\r\n\r\n              },\r\n            sexDict(row, column){\r\n                return getLabel(this.sexDictData,row.xb)\r\n            },\r\n            gwDict(row, column){\r\n                return getLabel(this.gwDictData,row.gzgw)\r\n            },\r\n            pointDict(){\r\n               return getLabel( this.pointTypeData, this.detailForm.pointType)\r\n            },\r\n            viewEmployeeDialog(row) {\r\n\r\n                this.employeeView = true\r\n                this.employeeDetail = row\r\n\r\n\r\n            },\r\n            employeeDictData(){\r\n                getDict('GZGW','ly').then(response => {\r\n                    this.gwDictData = response.data.data||[];\r\n\r\n                }).catch((err) => {});\r\n                getDict('0122','ly').then(response => {\r\n                    this.sexDictData = response.data.data||[];\r\n                }).catch((err) => {});\r\n\r\n            },\r\n            hotelDictData(){\r\n                remote('jfdj').then(response => {\r\n                    this.pointTypeData = response.data.data||{}\r\n                }).catch((err) => {});\r\n            },\r\n\r\n            initImg(id, code) {\r\n                let img=this.imgMap.get(id);\r\n                if(null===img||'undefined'===typeof (img)||''===img) {\r\n                    getImg(id, code)\r\n                    this.imgMap.set(id,id);\r\n                }\r\n            },\r\n            findHotelDetail(form) {\r\n                findOneHotel(Object.assign({}, form)).then(response => {\r\n                    this.detailForm = response.data.data;\r\n\r\n                    this. initDict()\r\n                })\r\n            },\r\n            findEmployee(page, form) {\r\n                this.imgMap.clear()\r\n                this.tableLoading = true\r\n                findEmployeePage(Object.assign({\r\n                    current: page.currentPage,\r\n                    size: page.pageSize,\r\n                    quitType: '20'\r\n                }, form)).then(response => {\r\n                    this.employeeData = response.data.data.records\r\n                    this.page.total = response.data.data.total\r\n                    this.tableLoading = false\r\n\r\n                })\r\n            },\r\n            employeeCount(unitId) {\r\n                monthCount(unitId).then(response => {\r\n                    this.countNum = response.data.data\r\n\r\n                })\r\n            },\r\n\r\n\r\n            moreClick() {\r\n                this.$emit(\"moreClick\", 1);\r\n            },\r\n            cellStyle({row, column, rowIndex, columnIndex}) {\r\n                if (columnIndex === 3) {\r\n                    return 'color:#6aaff8'\r\n                } else {\r\n                    return ''\r\n                }\r\n            },\r\n            snxxStyle({row, column, rowIndex, columnIndex}) {\r\n                if (columnIndex === 0) {\r\n                    return 'color:#6aaff8'\r\n                } else {\r\n                    return ''\r\n                }\r\n            },\r\n            facecellStyle({row, column, rowIndex, columnIndex}) {\r\n                if (columnIndex === 2) {\r\n                    return 'color:#6aaff8'\r\n                } else if (columnIndex === 0) {\r\n                    return 'text-align:center'\r\n                } else {\r\n                    return ''\r\n                }\r\n            },\r\n\r\n        }\r\n    }\r\n</script>\r\n\r\n\r\n"],"sourceRoot":"src/views/portal/archive/lvye/hotel"}]}