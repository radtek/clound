{"remainingRequest":"G:\\intellij work\\micro-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\intellij work\\micro-ui\\src\\views\\portal\\archive\\ylcs\\csba\\csbaList.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\intellij work\\micro-ui\\src\\views\\portal\\archive\\ylcs\\csba\\csbaList.vue","mtime":1560132718053},{"path":"G:\\intellij work\\micro-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\intellij work\\micro-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"G:\\intellij work\\micro-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\intellij work\\micro-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {countAll, findListPage, findOne} from \"@/api/portal/archive/common/unitQuery\";\nimport {ylcsDict} from \"@/const/crud/portal/archive/ylcs/ylcsDict\";\nimport csbaIndex from \"./csbaIndex\";\nimport contactList from \"../../contact/contactList\"\nexport default {\n    components: {\n        \"csbaIndex\": csbaIndex,\n        \"contactList\" : contactList\n    },\n    props:[\"searchForm\"],\n    data(){\n        return {\n            form:{\n                csbaZcmc:'',\n                compCode:'',\n                ywLx:'',\n                csbaState:''\n            },\n            paramForm: {\n                csbaId: undefined,\n                csbaBabh:undefined,\n                compId:undefined,\n                menuId: undefined,\n            },\n            showDetail: false,\n            applyToBody: true,\n            detailTitle: '',\n            viewFlag: false,\n\n            contactTitle:'',//添加关联弹窗title\n            showContact:false,//添加关联弹窗是否展示\n            contactForm: {\n                lyxtType: undefined,\n                qtdwbh:undefined,\n                dwmc:undefined,\n                hylx: undefined,\n                placeState:undefined,\n                areaCode:undefined,\n                address:undefined,\n                sspcs:undefined,\n            },\n\n            tableLoading: false,\n            page: {\n                total: 0, // 总页数\n                currentPage: 1, // 当前页数\n                pageSize: 10 // 每页显示多少条\n            },\n            tableData: [],\n            option:{\n                dialogWidth: '100%',\n                dialogHeight: '100%',\n                dialogFullscreen: true,\n                page:false,\n                align:'center',\n                indexLabel: '序号',\n                border: true,\n                index: true,\n                editBtn:false,\n                delBtn:false,\n                addBtn:false,\n                viewBtn:false,\n                menuWidth:'100',\n                card:true,\n                column:[\n                    { label: \"企业名称\",prop: 'csbaZcmc',search:true,searchDefault:'',},\n                    { label:\"行业类型\",\n                      prop:\"ywLx\",\n                      type:'select',\n                      search:true,\n                      searchFilterable: true ,\n                      dicUrl: '/portal/dict/getDict/业务类型/yl',\n                      dicMethod: 'get',\n                      dicQuery: {},\n                    },\n                    { label:\"经济类型\", prop:\"csbaJjlx\",},\n                    { label:\"行政区划\", prop:'compCode',type:'tree',expandLevel: 1,search:true,hide:true,\n                        dicUrl: '/portal/area/areaData',\n                        dicMethod: 'get',\n                        dicQuery: {},\n                        props:{\n                            label: \"name\",\n                            value: 'code'\n                        }\n                     },\n                    { label:\"辖区派出所\", prop:\"sspcs\",},\n                    { label:\"企业状态\", prop:\"csbaState\",type:'select',search: true,searchFilterable: true,dicData:ylcsDict.csbaState},\n                    { label: \"总积分\", prop: \"pointScore\"},\n                    {label: \"积分等级\", prop: \"pointType\", search: true, searchFilterable: true,\n                     type: 'select',\n                     dicUrl: '/admin/dict/type/jfdj',\n                     dicMethod: 'get',\n                     dicQuery: {},\n                    },\n                    { label: \"经营地址\", prop: \"csbaJydz\",hide:true},\n                ]\n            }\n        }\n    },\n    created(){\n        this.form.csbaZcmc=this.searchForm.dwmc\n        this.form.compCode=this.searchForm.orgCode\n        this.option.column[0].searchDefault=this.form.csbaZcmc\n    },\n    computed: {\n\n    },\n    methods:{\n        getList(page, params) {\n            this.tableLoading = true\n            findListPage(Object.assign({\n                current: page.currentPage,\n                size: page.pageSize\n            }, this.searchForm)).then(response => {\n                this.tableData = response.data.data.records\n                this.page.total = response.data.data.total\n                this.tableLoading = false\n            })\n        },\n        searchChange(form) {\n            console.log(\"searchChange\")\n            this.searchForm.dwmc=form.csbaZcmc\n            this.searchForm.orgCode = form.compCode\n            this.searchForm.placeType = form.ywLx\n            this.searchForm.placeState=form.csbaState\n            this.getList(this.page, this.searchForm)\n            this.$emit(\"changeCount\",this.searchForm);\n\n        },\n        handleDetail(row){\n            if(row.compId===null){\n                row.compId = row.csbaId\n            }\n            this.showDetail = true\n            this.detailTitle = row.csbaZcmc\n            this.paramForm.csbaId = row.csbaId\n            this.paramForm.csbaBabh = row.csbaBabh\n            this.paramForm.compId = row.compId\n            this.paramForm.menuId = this.searchForm.menuId\n        },\n\n        contact(row){\n            this.contactTitle='场所关联'\n            this.showContact=true\n           // this.contactForm.lyxtType='1'\n            this.contactForm.qtdwbh=row.csbaId\n            this.contactForm.dwmc=row.csbaZcmc\n            this.contactForm.hylx='08'\n            this.contactForm.address=row.csbaJydz\n            this.contactForm.areaCode=row.compCode.substr(0,4)\n            this.contactForm.sspcs=row.compCode\n        }\n    }\n}\n",{"version":3,"sources":["csbaList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"csbaList.vue","sourceRoot":"src/views/portal/archive/ylcs/csba","sourcesContent":["<template>\n <div class=\"execution\">\n   <basic-container>\n    <avue-crud :option=\"option\"\n               :data=\"tableData\"\n               v-model=\"form\"\n               ref=\"crud\"\n               :page=\"page\"\n               @on-load=\"getList\"\n               @search-change=\"searchChange\"\n               :table-loading=\"tableLoading\">\n\n        <template slot=\"menu\" slot-scope=\"scope\" >\n            <el-button size=\"mini\"\n                       type=\"text\"\n                       icon=\"el-icon-view\"\n                       @click=\"handleDetail(scope.row)\">查看\n            </el-button>\n            <el-button size=\"mini\"\n                       type=\"text\"\n                       icon=\"el-icon-plus\"\n                       @click=\"contact(scope.row)\">场所关联\n            </el-button>\n        </template>\n\n    </avue-crud>\n   </basic-container>\n\n     <el-dialog :title=\"detailTitle\" fullscreen :visible.sync=\"showDetail\"  :append-to-body=\"applyToBody\">\n         <keep-alive>\n             <csba-index v-bind:param-form=\"paramForm\"/>\n         </keep-alive>\n     </el-dialog>\n\n     <el-dialog :title=\"contactTitle\" fullscreen :visible.sync=\"showContact\"  :append-to-body=\"applyToBody\">\n         <keep-alive>\n             <contact-list v-bind:contact-form=\"contactForm\"/>\n         </keep-alive>\n     </el-dialog>\n\n    </div>\n</template>\n\n\n<script>\n    import {countAll, findListPage, findOne} from \"@/api/portal/archive/common/unitQuery\";\n    import {ylcsDict} from \"@/const/crud/portal/archive/ylcs/ylcsDict\";\n    import csbaIndex from \"./csbaIndex\";\n    import contactList from \"../../contact/contactList\"\n    export default {\n        components: {\n            \"csbaIndex\": csbaIndex,\n            \"contactList\" : contactList\n        },\n        props:[\"searchForm\"],\n        data(){\n            return {\n                form:{\n                    csbaZcmc:'',\n                    compCode:'',\n                    ywLx:'',\n                    csbaState:''\n                },\n                paramForm: {\n                    csbaId: undefined,\n                    csbaBabh:undefined,\n                    compId:undefined,\n                    menuId: undefined,\n                },\n                showDetail: false,\n                applyToBody: true,\n                detailTitle: '',\n                viewFlag: false,\n\n                contactTitle:'',//添加关联弹窗title\n                showContact:false,//添加关联弹窗是否展示\n                contactForm: {\n                    lyxtType: undefined,\n                    qtdwbh:undefined,\n                    dwmc:undefined,\n                    hylx: undefined,\n                    placeState:undefined,\n                    areaCode:undefined,\n                    address:undefined,\n                    sspcs:undefined,\n                },\n\n                tableLoading: false,\n                page: {\n                    total: 0, // 总页数\n                    currentPage: 1, // 当前页数\n                    pageSize: 10 // 每页显示多少条\n                },\n                tableData: [],\n                option:{\n                    dialogWidth: '100%',\n                    dialogHeight: '100%',\n                    dialogFullscreen: true,\n                    page:false,\n                    align:'center',\n                    indexLabel: '序号',\n                    border: true,\n                    index: true,\n                    editBtn:false,\n                    delBtn:false,\n                    addBtn:false,\n                    viewBtn:false,\n                    menuWidth:'100',\n                    card:true,\n                    column:[\n                        { label: \"企业名称\",prop: 'csbaZcmc',search:true,searchDefault:'',},\n                        { label:\"行业类型\",\n                          prop:\"ywLx\",\n                          type:'select',\n                          search:true,\n                          searchFilterable: true ,\n                          dicUrl: '/portal/dict/getDict/业务类型/yl',\n                          dicMethod: 'get',\n                          dicQuery: {},\n                        },\n                        { label:\"经济类型\", prop:\"csbaJjlx\",},\n                        { label:\"行政区划\", prop:'compCode',type:'tree',expandLevel: 1,search:true,hide:true,\n                            dicUrl: '/portal/area/areaData',\n                            dicMethod: 'get',\n                            dicQuery: {},\n                            props:{\n                                label: \"name\",\n                                value: 'code'\n                            }\n                         },\n                        { label:\"辖区派出所\", prop:\"sspcs\",},\n                        { label:\"企业状态\", prop:\"csbaState\",type:'select',search: true,searchFilterable: true,dicData:ylcsDict.csbaState},\n                        { label: \"总积分\", prop: \"pointScore\"},\n                        {label: \"积分等级\", prop: \"pointType\", search: true, searchFilterable: true,\n                         type: 'select',\n                         dicUrl: '/admin/dict/type/jfdj',\n                         dicMethod: 'get',\n                         dicQuery: {},\n                        },\n                        { label: \"经营地址\", prop: \"csbaJydz\",hide:true},\n                    ]\n                }\n            }\n        },\n        created(){\n            this.form.csbaZcmc=this.searchForm.dwmc\n            this.form.compCode=this.searchForm.orgCode\n            this.option.column[0].searchDefault=this.form.csbaZcmc\n        },\n        computed: {\n\n        },\n        methods:{\n            getList(page, params) {\n                this.tableLoading = true\n                findListPage(Object.assign({\n                    current: page.currentPage,\n                    size: page.pageSize\n                }, this.searchForm)).then(response => {\n                    this.tableData = response.data.data.records\n                    this.page.total = response.data.data.total\n                    this.tableLoading = false\n                })\n            },\n            searchChange(form) {\n                console.log(\"searchChange\")\n                this.searchForm.dwmc=form.csbaZcmc\n                this.searchForm.orgCode = form.compCode\n                this.searchForm.placeType = form.ywLx\n                this.searchForm.placeState=form.csbaState\n                this.getList(this.page, this.searchForm)\n                this.$emit(\"changeCount\",this.searchForm);\n\n            },\n            handleDetail(row){\n                if(row.compId===null){\n                    row.compId = row.csbaId\n                }\n                this.showDetail = true\n                this.detailTitle = row.csbaZcmc\n                this.paramForm.csbaId = row.csbaId\n                this.paramForm.csbaBabh = row.csbaBabh\n                this.paramForm.compId = row.compId\n                this.paramForm.menuId = this.searchForm.menuId\n            },\n\n            contact(row){\n                this.contactTitle='场所关联'\n                this.showContact=true\n               // this.contactForm.lyxtType='1'\n                this.contactForm.qtdwbh=row.csbaId\n                this.contactForm.dwmc=row.csbaZcmc\n                this.contactForm.hylx='08'\n                this.contactForm.address=row.csbaJydz\n                this.contactForm.areaCode=row.compCode.substr(0,4)\n                this.contactForm.sspcs=row.compCode\n            }\n        }\n    }\n</script>"]}]}