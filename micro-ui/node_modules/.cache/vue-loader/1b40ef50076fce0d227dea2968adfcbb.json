{"remainingRequest":"G:\\intellij work\\micro-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\intellij work\\micro-ui\\src\\views\\portal\\archive\\ylcs\\ryba\\rybaList.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\intellij work\\micro-ui\\src\\views\\portal\\archive\\ylcs\\ryba\\rybaList.vue","mtime":1559648897387},{"path":"G:\\intellij work\\micro-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\intellij work\\micro-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"G:\\intellij work\\micro-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\intellij work\\micro-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport {findRyListPage,getRyDetail,getRyImg} from \"@/api/portal/archive/ylcs/csba\";\nimport { formOption} from '@/const/crud/portal/archive/ylcs/ryba/index'\nimport {ylcsDict}  from  \"@/const/crud/portal/archive/ylcs/ylcsDict\";\n\nexport default {\n    name: 'ryba',\n    props:[\"csbaForm\"],\n    data(){\n        return {\n            compId:'',\n            csbabh:'',\n            form:{\n            },\n            fromDetail:{},\n            formView:false,\n            formTitle:'',\n            tableLoading: false,\n            page: {\n                total: 0, // 总页数\n                currentPage: 1, // 当前页数\n                pageSize: 10 // 每页显示多少条\n            },\n            formOption:formOption,\n            tableData: [],\n            option:{\n                dialogWidth: '100%',\n                dialogHeight: '100%',\n                dialogFullscreen: true,\n                page:false,\n                align:'center',\n                indexLabel: '序号',\n                border: true,\n                index: true,\n                editBtn:false,\n                delBtn:false,\n                addBtn:false,\n                viewBtn:false,\n                refreshBtn: false,\n                searchBtn:false,\n                columnBtn:false,\n                menu:false,\n                card:true,\n                column:[\n                    { label: \"姓名\",prop: 'rybaMc',slot:true,search:true},\n                    { label:\"证件号码\", prop:\"rybaZjhm\",search:true},\n                    { label:\"性别\", prop:\"rybaXb\",type:'select',dicData:ylcsDict.sex},\n                    { label:\"出生日期\", prop:\"rybaCsrq\",},\n                    { label:\"类别\", prop:\"rybaLb\",search:true,type:'select',dicData: ylcsDict.rylb},\n                    { label:\"岗位名称\", prop:\"rybaGwmc\",},\n                    { label:\"上岗日期\", prop:\"rybaDjsj\",},\n                    { label:\"离岗日期\", prop:\"rybaLzsj\",},\n                    { label:\"状态\", prop:\"rybaCyzt\",type:'select',search:true,searchDefault:'',dicData: ylcsDict.ryzt},\n                    { label:\"七类人员类型\", prop:\"rybaLb\",},\n                    ]\n            }\n        }\n    },\n    created(){\n        this.compId = this.csbaForm.compId\n        this.csbabh = this.csbaForm.csbaBabh\n        this.option.column[8].searchDefault = ylcsDict.ryzt[0].value\n    },\n    computed: {\n    },\n    watch: {\n        csbaForm: {\n            //深度监控父组件传递过来的值、否则无法根据传递过来的值更新数据\n            handler() {\n                this.compId = this.csbaForm.compId\n                this.csbabh = this.csbaForm.csbaBabh\n                this.option.column[8].searchDefault = ylcsDict.ryzt[0].value\n                this.getList(this.page);\n            },\n            deep: true\n        },\n    },\n    methods:{\n        getList(page, params) {\n            if(params === undefined ||params === null || params === '' ){\n                params ={rybaCyzt: ylcsDict.ryzt[0].value}\n            }\n            this.tableLoading = true\n            findRyListPage(Object.assign({\n                current: page.currentPage,\n                size: page.pageSize,\n                compId:this.compId,\n                csbabh:this.csbabh\n            }, params)).then(response => {\n                this.tableData = response.data.data.records\n                this.page.total = response.data.data.total\n                this.tableLoading = false\n            })\n        },\n        handleFilter(param) {\n            this.page.page = 1;\n            this.getList(this.page, param);\n        },\n        getFormDetail(id) {\n            getRyDetail(id).then(response => {\n                this.fromDetail = response.data.data\n            })\n        },\n        openRyxqDialog(row){\n            this.formView = true\n            this.formTitle = \"人员详情\"\n            this.getFormDetail(row.rybaId)\n            getRyImg(row.rybaZp,'ryImg')\n        },\n\n    }\n}\n",{"version":3,"sources":["rybaList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"rybaList.vue","sourceRoot":"src/views/portal/archive/ylcs/ryba","sourcesContent":["<template>\r\n    <div class=\"execution\">\r\n        <basic-container>\r\n            <avue-crud :option=\"option\"\r\n                       :data=\"tableData\"\r\n                       v-model=\"form\"\r\n                       ref=\"crud\"\r\n                       :page=\"page\"\r\n                       @on-load=\"getList\"\r\n                       @search-change=\"handleFilter\"\r\n                       :table-loading=\"tableLoading\">\r\n\r\n                <template slot=\"rybaMc\" slot-scope=\"scope\">\r\n                    <button type=\"button\" class=\"el-button el-button--text el-button--small\"\r\n                            @click=\"openRyxqDialog(scope.row)\" >{{scope.row.rybaMc}}</button>\r\n                </template>\r\n            </avue-crud>\r\n        </basic-container>\r\n\r\n        <el-dialog :title=\"formTitle\"  :visible.sync=\"formView\" :fullscreen=\"true\" :append-to-body=\"true\">\r\n            <avue-detail :option=\"formOption\" v-model=\"fromDetail\" >\r\n                <template slot=\"rybaZpContent\" slot-scope=\"scope\"  >\r\n                    <img style=\"height: 100px;width: 100px\"  id=\"ryImg\"/>\r\n                </template>\r\n            </avue-detail>\r\n            <div slot=\"footer\"\r\n                 class=\"dialog-footer\">\r\n                <el-button type=\"primary\" @click=\"formView=false\">关 闭\r\n                </el-button>\r\n            </div>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n\r\n<script>\r\n\r\n    import {findRyListPage,getRyDetail,getRyImg} from \"@/api/portal/archive/ylcs/csba\";\r\n    import { formOption} from '@/const/crud/portal/archive/ylcs/ryba/index'\r\n    import {ylcsDict}  from  \"@/const/crud/portal/archive/ylcs/ylcsDict\";\r\n\r\n    export default {\r\n        name: 'ryba',\r\n        props:[\"csbaForm\"],\r\n        data(){\r\n            return {\r\n                compId:'',\r\n                csbabh:'',\r\n                form:{\r\n                },\r\n                fromDetail:{},\r\n                formView:false,\r\n                formTitle:'',\r\n                tableLoading: false,\r\n                page: {\r\n                    total: 0, // 总页数\r\n                    currentPage: 1, // 当前页数\r\n                    pageSize: 10 // 每页显示多少条\r\n                },\r\n                formOption:formOption,\r\n                tableData: [],\r\n                option:{\r\n                    dialogWidth: '100%',\r\n                    dialogHeight: '100%',\r\n                    dialogFullscreen: true,\r\n                    page:false,\r\n                    align:'center',\r\n                    indexLabel: '序号',\r\n                    border: true,\r\n                    index: true,\r\n                    editBtn:false,\r\n                    delBtn:false,\r\n                    addBtn:false,\r\n                    viewBtn:false,\r\n                    refreshBtn: false,\r\n                    searchBtn:false,\r\n                    columnBtn:false,\r\n                    menu:false,\r\n                    card:true,\r\n                    column:[\r\n                        { label: \"姓名\",prop: 'rybaMc',slot:true,search:true},\r\n                        { label:\"证件号码\", prop:\"rybaZjhm\",search:true},\r\n                        { label:\"性别\", prop:\"rybaXb\",type:'select',dicData:ylcsDict.sex},\r\n                        { label:\"出生日期\", prop:\"rybaCsrq\",},\r\n                        { label:\"类别\", prop:\"rybaLb\",search:true,type:'select',dicData: ylcsDict.rylb},\r\n                        { label:\"岗位名称\", prop:\"rybaGwmc\",},\r\n                        { label:\"上岗日期\", prop:\"rybaDjsj\",},\r\n                        { label:\"离岗日期\", prop:\"rybaLzsj\",},\r\n                        { label:\"状态\", prop:\"rybaCyzt\",type:'select',search:true,searchDefault:'',dicData: ylcsDict.ryzt},\r\n                        { label:\"七类人员类型\", prop:\"rybaLb\",},\r\n                        ]\r\n                }\r\n            }\r\n        },\r\n        created(){\r\n            this.compId = this.csbaForm.compId\r\n            this.csbabh = this.csbaForm.csbaBabh\r\n            this.option.column[8].searchDefault = ylcsDict.ryzt[0].value\r\n        },\r\n        computed: {\r\n        },\r\n        watch: {\r\n            csbaForm: {\r\n                //深度监控父组件传递过来的值、否则无法根据传递过来的值更新数据\r\n                handler() {\r\n                    this.compId = this.csbaForm.compId\r\n                    this.csbabh = this.csbaForm.csbaBabh\r\n                    this.option.column[8].searchDefault = ylcsDict.ryzt[0].value\r\n                    this.getList(this.page);\r\n                },\r\n                deep: true\r\n            },\r\n        },\r\n        methods:{\r\n            getList(page, params) {\r\n                if(params === undefined ||params === null || params === '' ){\r\n                    params ={rybaCyzt: ylcsDict.ryzt[0].value}\r\n                }\r\n                this.tableLoading = true\r\n                findRyListPage(Object.assign({\r\n                    current: page.currentPage,\r\n                    size: page.pageSize,\r\n                    compId:this.compId,\r\n                    csbabh:this.csbabh\r\n                }, params)).then(response => {\r\n                    this.tableData = response.data.data.records\r\n                    this.page.total = response.data.data.total\r\n                    this.tableLoading = false\r\n                })\r\n            },\r\n            handleFilter(param) {\r\n                this.page.page = 1;\r\n                this.getList(this.page, param);\r\n            },\r\n            getFormDetail(id) {\r\n                getRyDetail(id).then(response => {\r\n                    this.fromDetail = response.data.data\r\n                })\r\n            },\r\n            openRyxqDialog(row){\r\n                this.formView = true\r\n                this.formTitle = \"人员详情\"\r\n                this.getFormDetail(row.rybaId)\r\n                getRyImg(row.rybaZp,'ryImg')\r\n            },\r\n\r\n        }\r\n    }\r\n</script>"]}]}