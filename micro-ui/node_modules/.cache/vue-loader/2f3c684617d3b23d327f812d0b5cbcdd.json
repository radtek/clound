{"remainingRequest":"G:\\intellij work\\micro-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\intellij work\\micro-ui\\src\\views\\portal\\archive\\ylcs\\aqjc\\aqjcList.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\intellij work\\micro-ui\\src\\views\\portal\\archive\\ylcs\\aqjc\\aqjcList.vue","mtime":1559217814764},{"path":"G:\\intellij work\\micro-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\intellij work\\micro-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"G:\\intellij work\\micro-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\intellij work\\micro-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {findAqjcPage,getAqjcDetail,getAqjcContent} from \"@/api/portal/archive/ylcs/csba\";\nimport {ylcsDict}  from  \"@/const/crud/portal/archive/ylcs/ylcsDict\";\n\nexport default {\n    name: 'aqjc',\n    props:[\"csbaForm\"],\n    data(){\n        return {\n            sjCompId:'',\n            form:{\n            },\n            tableLoading: false,\n            page: {\n                total: 0, // 总页数\n                currentPage: 1, // 当前页数\n                pageSize: 10 // 每页显示多少条\n            },\n            tableData: [],\n            checkData:[],\n            fromDetail:{},\n            formView:false,\n            formTitle:'',\n            formOption:{\n                dialogWidth: '100%',\n                dialogHeight: '100%',\n                dialogFullscreen: true,\n                page:false,\n                align:'center',\n                border: true,\n                index: true,\n                editBtn:false,\n                delBtn:false,\n                addBtn:false,\n                viewBtn:false,\n                refreshBtn: false,\n                searchBtn:false,\n                columnBtn:false,\n                menu:false,\n                card:true,\n                group: [\n                    {\n                        label: '基本信息',\n                        prop: 'jbxx',\n                        icon: 'el-icon-info',\n                        column:[\n                            { label:\"检查单位\", prop:\"compName\"},\n                            { label:\"检查时间\", prop:\"checkDate\",},\n                            { label:\"登记人\", prop:\"compUser\",},\n                            { label:\"登记时间\", prop:\"recordDate\",},\n                            { label:\"检查类型\", prop:\"checkType\",dicData: [{label: '日常检查', value:0}]},\n                            { label:\"检查人员\", prop:\"checkMan1\",},\n                            { label:\"其他检查人\", prop:\"checkMan2\",},\n                            { label:\"参检人数\", prop:\"checkPersNum\",},\n                            { label:\"受检单位\", prop:\"sjCompName\",},\n                            { label:\"是否歌舞\", prop:\"gw\",dicData: ylcsDict.yes_no,},\n                            { label:\"是否游艺\", prop:\"yy\",dicData: ylcsDict.yes_no,},\n                            { label:\"是否按摩\", prop:\"am\",dicData: ylcsDict.yes_no,},\n                            { label:\"受检单位类型\", prop:\"sjCompNature\",\n                              dicUrl: '/portal/dict/getDict/单位类型/yl',\n                              dicMethod: 'get',\n                              dicQuery: {},\n                            },\n                            { label:\"受检单位当值负责人\", prop:\"sjCompFzr\"},\n                        ]\n                    },\n                    {\n                        label: '检查详情',\n                        prop: 'jcxq',\n                        slot:true,\n                        formslot:true,\n                        icon: 'el-icon-info',\n                    },\n                    {\n                        label: '检查结果',\n                        prop: 'jcjg',\n                        icon: 'el-icon-info',\n                        column: [\n                            {label: '当前分数', prop: 'dqfs',},\n                            {label: '扣分分数', prop: 'kffs',},\n                            {label: '处理意见', prop: 'zgyj',},\n                            {label: '处理结果', prop: 'cljg',},\n                            {label: '是否需整改', prop: 'zhenggai',dicData:ylcsDict.yes_no},\n                            {label: '整改期限', prop: 'zhenggaiDate',},\n                            {label: '其他违规情况和安全隐患', prop: 'aqyh',span:24},\n                        ]\n                    }\n                ]\n            },\n            option:{\n                dialogWidth: '100%',\n                dialogHeight: '100%',\n                dialogFullscreen: true,\n                page:false,\n                align:'center',\n                indexLabel: '序号',\n                border: true,\n                index: true,\n                editBtn:false,\n                delBtn:false,\n                addBtn:false,\n                viewBtn:false,\n                menuWidth:100,\n                column:[\n                    { label:\"检查时间\", prop:\"checkDate\",type:'datetimerange'},\n                    { label:\"检查单位\", prop:\"compName\",overHidden:true},\n                    { label:\"检查人\", prop:\"checkMan1\",},\n                    { label:\"随同检查人\", prop:\"checkMan2\",},\n                    { label:\"处理结果\", prop:\"cljg\",},\n                    { label:\"处理意见\",prop: 'zgyj',},\n                    {label:\"是否需整改\", prop:\"zhenggai\",type:'select',dicData:ylcsDict.yes_no,search:true},\n                ]\n            }\n        }\n    },\n    created(){\n        this.sjCompId = this.csbaForm.compId\n    },\n    computed: {\n    },\n    watch: {\n        csbaForm: {\n            //深度监控父组件传递过来的值、否则无法根据传递过来的值更新数据\n            handler() {\n                this.sjCompId = this.csbaForm.compId\n                this.getList(this.page,{});\n            },\n            deep: true\n        },\n    },\n    methods:{\n        getList(page, params) {\n            this.tableLoading = true\n            findAqjcPage(Object.assign({\n                current: page.currentPage,\n                size: page.pageSize,\n                sjCompId:this.sjCompId\n            }, params)).then(response => {\n                this.tableData = response.data.data.records\n                this.page.total = response.data.data.total\n                this.tableLoading = false\n            })\n        },\n        handleFilter(param) {\n            this.page.page = 1;\n            this.getList(this.page, param);\n        },\n        handleDetail(row){\n            this.formView = true\n            this.formTitle = \"检查详情\"\n            this.getFormDetail(row.aqjcId)\n            this.getFormCheckDetail(row.aqjcId)\n        },\n        getFormDetail(id) {\n            getAqjcDetail(id).then(response => {\n                this.fromDetail = response.data.data\n            })\n        },\n        getFormCheckDetail(id){\n            getAqjcContent(id).then(response => {\n                this.checkData = response.data.data\n                console.log(this.checkData)\n            })\n        },\n        getJcqk(state){\n            if(state == '0'){\n                return \"否\"\n            }\n            if(state == '1'){\n                return \"是\"\n            }\n        },\n    }\n}\n",{"version":3,"sources":["aqjcList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"aqjcList.vue","sourceRoot":"src/views/portal/archive/ylcs/aqjc","sourcesContent":["<template>\n <div class=\"execution\">\n   <basic-container>\n    <avue-crud :option=\"option\"\n               :data=\"tableData\"\n               v-model=\"form\"\n               ref=\"crud\"\n               :page=\"page\"\n               @on-load=\"getList\"\n               @search-change=\"handleFilter\"\n               @refresh-change=\"handleFilter\"\n               :table-loading=\"tableLoading\">\n\n        <template slot=\"menu\" slot-scope=\"scope\" >\n            <el-button size=\"mini\"\n                       type=\"text\"\n                       icon=\"el-icon-view\"\n                       @click=\"handleDetail(scope.row)\">查看\n            </el-button>\n        </template>\n    </avue-crud>\n\n   </basic-container>\n     <el-dialog :title=\"formTitle\"  :visible.sync=\"formView\" :fullscreen=\"true\" :append-to-body=\"true\">\n         <avue-detail :option=\"formOption\" v-model=\"fromDetail\" >\n             <template slot=\"jcxq\" slot-scope=\"scope\">\n                 <el-table :data=\"checkData\"\n                           border\n                           style=\"width: 100%\"\n                 >\n                     <el-table-column\n                             label=\"检查内容\"\n                             prop=\"proName\"\n                             align=\"center\"\n                             width=\"307\">\n                     </el-table-column>\n\n                     <el-table-column\n                             label=\"检查情况\"\n                             width=\"220\"\n                             align=\"center\">\n                         <template slot-scope=\"scope\" >\n                             <div v-text=\"getJcqk(scope.row.state)\"></div>\n                         </template>\n                     </el-table-column>\n\n                     <el-table-column\n                             label=\"备注\"\n                             prop=\"remark\"\n                             width=\"700\"\n                             align=\"center\">\n                     </el-table-column>\n                 </el-table>\n             </template>\n\n         </avue-detail>\n         <div slot=\"footer\"\n              class=\"dialog-footer\">\n             <el-button type=\"primary\" @click=\"formView=false\">关 闭\n             </el-button>\n         </div>\n     </el-dialog>\n    </div>\n</template>\n\n\n<script>\n    import {findAqjcPage,getAqjcDetail,getAqjcContent} from \"@/api/portal/archive/ylcs/csba\";\n    import {ylcsDict}  from  \"@/const/crud/portal/archive/ylcs/ylcsDict\";\n\n    export default {\n        name: 'aqjc',\n        props:[\"csbaForm\"],\n        data(){\n            return {\n                sjCompId:'',\n                form:{\n                },\n                tableLoading: false,\n                page: {\n                    total: 0, // 总页数\n                    currentPage: 1, // 当前页数\n                    pageSize: 10 // 每页显示多少条\n                },\n                tableData: [],\n                checkData:[],\n                fromDetail:{},\n                formView:false,\n                formTitle:'',\n                formOption:{\n                    dialogWidth: '100%',\n                    dialogHeight: '100%',\n                    dialogFullscreen: true,\n                    page:false,\n                    align:'center',\n                    border: true,\n                    index: true,\n                    editBtn:false,\n                    delBtn:false,\n                    addBtn:false,\n                    viewBtn:false,\n                    refreshBtn: false,\n                    searchBtn:false,\n                    columnBtn:false,\n                    menu:false,\n                    card:true,\n                    group: [\n                        {\n                            label: '基本信息',\n                            prop: 'jbxx',\n                            icon: 'el-icon-info',\n                            column:[\n                                { label:\"检查单位\", prop:\"compName\"},\n                                { label:\"检查时间\", prop:\"checkDate\",},\n                                { label:\"登记人\", prop:\"compUser\",},\n                                { label:\"登记时间\", prop:\"recordDate\",},\n                                { label:\"检查类型\", prop:\"checkType\",dicData: [{label: '日常检查', value:0}]},\n                                { label:\"检查人员\", prop:\"checkMan1\",},\n                                { label:\"其他检查人\", prop:\"checkMan2\",},\n                                { label:\"参检人数\", prop:\"checkPersNum\",},\n                                { label:\"受检单位\", prop:\"sjCompName\",},\n                                { label:\"是否歌舞\", prop:\"gw\",dicData: ylcsDict.yes_no,},\n                                { label:\"是否游艺\", prop:\"yy\",dicData: ylcsDict.yes_no,},\n                                { label:\"是否按摩\", prop:\"am\",dicData: ylcsDict.yes_no,},\n                                { label:\"受检单位类型\", prop:\"sjCompNature\",\n                                  dicUrl: '/portal/dict/getDict/单位类型/yl',\n                                  dicMethod: 'get',\n                                  dicQuery: {},\n                                },\n                                { label:\"受检单位当值负责人\", prop:\"sjCompFzr\"},\n                            ]\n                        },\n                        {\n                            label: '检查详情',\n                            prop: 'jcxq',\n                            slot:true,\n                            formslot:true,\n                            icon: 'el-icon-info',\n                        },\n                        {\n                            label: '检查结果',\n                            prop: 'jcjg',\n                            icon: 'el-icon-info',\n                            column: [\n                                {label: '当前分数', prop: 'dqfs',},\n                                {label: '扣分分数', prop: 'kffs',},\n                                {label: '处理意见', prop: 'zgyj',},\n                                {label: '处理结果', prop: 'cljg',},\n                                {label: '是否需整改', prop: 'zhenggai',dicData:ylcsDict.yes_no},\n                                {label: '整改期限', prop: 'zhenggaiDate',},\n                                {label: '其他违规情况和安全隐患', prop: 'aqyh',span:24},\n                            ]\n                        }\n                    ]\n                },\n                option:{\n                    dialogWidth: '100%',\n                    dialogHeight: '100%',\n                    dialogFullscreen: true,\n                    page:false,\n                    align:'center',\n                    indexLabel: '序号',\n                    border: true,\n                    index: true,\n                    editBtn:false,\n                    delBtn:false,\n                    addBtn:false,\n                    viewBtn:false,\n                    menuWidth:100,\n                    column:[\n                        { label:\"检查时间\", prop:\"checkDate\",type:'datetimerange'},\n                        { label:\"检查单位\", prop:\"compName\",overHidden:true},\n                        { label:\"检查人\", prop:\"checkMan1\",},\n                        { label:\"随同检查人\", prop:\"checkMan2\",},\n                        { label:\"处理结果\", prop:\"cljg\",},\n                        { label:\"处理意见\",prop: 'zgyj',},\n                        {label:\"是否需整改\", prop:\"zhenggai\",type:'select',dicData:ylcsDict.yes_no,search:true},\n                    ]\n                }\n            }\n        },\n        created(){\n            this.sjCompId = this.csbaForm.compId\n        },\n        computed: {\n        },\n        watch: {\n            csbaForm: {\n                //深度监控父组件传递过来的值、否则无法根据传递过来的值更新数据\n                handler() {\n                    this.sjCompId = this.csbaForm.compId\n                    this.getList(this.page,{});\n                },\n                deep: true\n            },\n        },\n        methods:{\n            getList(page, params) {\n                this.tableLoading = true\n                findAqjcPage(Object.assign({\n                    current: page.currentPage,\n                    size: page.pageSize,\n                    sjCompId:this.sjCompId\n                }, params)).then(response => {\n                    this.tableData = response.data.data.records\n                    this.page.total = response.data.data.total\n                    this.tableLoading = false\n                })\n            },\n            handleFilter(param) {\n                this.page.page = 1;\n                this.getList(this.page, param);\n            },\n            handleDetail(row){\n                this.formView = true\n                this.formTitle = \"检查详情\"\n                this.getFormDetail(row.aqjcId)\n                this.getFormCheckDetail(row.aqjcId)\n            },\n            getFormDetail(id) {\n                getAqjcDetail(id).then(response => {\n                    this.fromDetail = response.data.data\n                })\n            },\n            getFormCheckDetail(id){\n                getAqjcContent(id).then(response => {\n                    this.checkData = response.data.data\n                    console.log(this.checkData)\n                })\n            },\n            getJcqk(state){\n                if(state == '0'){\n                    return \"否\"\n                }\n                if(state == '1'){\n                    return \"是\"\n                }\n            },\n        }\n    }\n</script>"]}]}