{"remainingRequest":"G:\\intellij work\\micro-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\intellij work\\micro-ui\\src\\views\\portal\\archive\\lvye\\hotel\\detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\intellij work\\micro-ui\\src\\views\\portal\\archive\\lvye\\hotel\\detail.vue","mtime":1559610000765},{"path":"G:\\intellij work\\micro-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\intellij work\\micro-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"G:\\intellij work\\micro-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\intellij work\\micro-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {findOneHotel} from \"@/api/portal/archive/lvye/hotel\";\nimport {findEmployeePage, monthCount, getImg} from \"@/api/portal/archive/lvye/employee\";\nimport '@/styles/portal/archive/place-detail.scss'\nimport employeeDetail from '../employee/employeeDetail'\nimport {findLabel,getDict,getLabel}  from  \"@/api/portal/archive/dict/dict\";\nimport {remote}  from  \"@/api/admin/dict\";\nexport default {\n    components: {\n        employeeDetail\n    },\n    name: 'hotelDetail',\n    props: [\"paramForm\"],\n    data() {\n        return {\n            detailForm: {},\n            imgMap : new Map(),\n            employeeView: false,\n            employeeDetail: {},\n            searchFrom: {\n                dwbh: undefined,\n                menuId: undefined,\n            },\n            countNum: {\n                quit: 0,\n                inc: 0\n            },\n            tableLoading: true,\n            collectLoading:false,\n            appleToBody: true,\n            url: undefined,\n            page: {\n                total: 0, // 总页数\n                currentPage: 1, // 当前页数\n                pageSize: 5 // 每页显示多少条\n            },\n            dialogTableVisible: false,\n            dialogTablePlaceVisible: false,\n            employeeData: [],\n            sexDictData:[],\n            gwDictData:[],\n            pointTypeData:[],\n        }\n    },\n    created() {\n\n        this.employeeDictData()\n        this.hotelDictData()\n        this.searchFrom.dwbh = this.paramForm.unitId;\n        this.searchFrom.menuId = this.paramForm.menuId;\n        this.findHotelDetail(this.searchFrom);\n        this.findEmployee(this.page, this.searchFrom);\n        this.employeeCount(this.searchFrom.dwbh);\n\n    },\n    watch: {\n        paramForm: {\n            //深度监控父组件传递过来的值、否则无法根据传递过来的值更新数据\n            handler() {\n\n                this.searchFrom.dwbh = this.paramForm.unitId;\n                this.searchFrom.menuId = this.paramForm.menuId;\n                this.findHotelDetail(this.searchFrom);\n                this.findEmployee(this.page, this.searchFrom);\n                this.employeeCount(this.searchFrom.dwbh);\n\n\n            },\n            deep: true\n        },\n    },\n    methods: {\n        closeDialog(){\n            this.employeeView=false\n            this.imgMap.clear()\n        },\n        editCollect(){\n            this.$message({\n                type:'success',\n                dangerouslyUseHTMLString: true,\n                duration:4000,\n                message: '操作成功'\n            });\n            this.collectLoading=true\n            alert('收藏信息')\n            this.collectLoading=false\n        },\n\n\n        initDict(){\n\n            findLabel('LGLB','ly',this.detailForm.hotelKind).then(value=>{\n                this.detailForm.hotelKind=value\n            }).catch((err) => {});\n            findLabel('0209','ly',this.detailForm.state).then(value=>{\n                this.detailForm.state=value\n            }).catch((err) => {});\n            findLabel('0210','ly',this.detailForm.stars).then(value=>{\n                this.detailForm.stars=value\n            }).catch((err) => {});\n            findLabel('0211','ly',this.detailForm.grade).then(value=>{\n                this.detailForm.grade=value\n            }).catch((err) => {});\n\n\n          },\n        sexDict(row, column){\n            return getLabel(this.sexDictData,row.xb)\n        },\n        gwDict(row, column){\n            return getLabel(this.gwDictData,row.gzgw)\n        },\n        pointDict(){\n           return getLabel( this.pointTypeData, this.detailForm.pointType)\n        },\n        viewEmployeeDialog(row) {\n\n            this.employeeView = true\n            this.employeeDetail = row\n\n\n        },\n        employeeDictData(){\n            getDict('GZGW','ly').then(response => {\n                this.gwDictData = response.data.data||[];\n\n            }).catch((err) => {});\n            getDict('0122','ly').then(response => {\n                this.sexDictData = response.data.data||[];\n            }).catch((err) => {});\n\n        },\n        hotelDictData(){\n            remote('jfdj').then(response => {\n                this.pointTypeData = response.data.data||{}\n            }).catch((err) => {});\n        },\n\n        initImg(id, code) {\n            let img=this.imgMap.get(id);\n            if(null===img||'undefined'===typeof (img)||''===img) {\n                getImg(id, code)\n                this.imgMap.set(id,id);\n            }\n        },\n        findHotelDetail(form) {\n            findOneHotel(Object.assign({}, form)).then(response => {\n                this.detailForm = response.data.data;\n\n                this. initDict()\n            })\n        },\n        findEmployee(page, form) {\n            this.imgMap.clear()\n            this.tableLoading = true\n            findEmployeePage(Object.assign({\n                current: page.currentPage,\n                size: page.pageSize,\n                quitType: '20'\n            }, form)).then(response => {\n                this.employeeData = response.data.data.records\n                this.page.total = response.data.data.total\n                this.tableLoading = false\n\n            })\n        },\n        employeeCount(unitId) {\n            monthCount(unitId).then(response => {\n                this.countNum = response.data.data\n\n            })\n        },\n\n\n        moreClick() {\n            this.$emit(\"moreClick\", 1);\n        },\n        cellStyle({row, column, rowIndex, columnIndex}) {\n            if (columnIndex === 3) {\n                return 'color:#6aaff8'\n            } else {\n                return ''\n            }\n        },\n        snxxStyle({row, column, rowIndex, columnIndex}) {\n            if (columnIndex === 0) {\n                return 'color:#6aaff8'\n            } else {\n                return ''\n            }\n        },\n        facecellStyle({row, column, rowIndex, columnIndex}) {\n            if (columnIndex === 2) {\n                return 'color:#6aaff8'\n            } else if (columnIndex === 0) {\n                return 'text-align:center'\n            } else {\n                return ''\n            }\n        },\n\n    }\n}\n",{"version":3,"sources":["detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"detail.vue","sourceRoot":"src/views/portal/archive/lvye/hotel","sourcesContent":["<template>\r\n    <div class=\"info-cate\">\r\n        <div class=\"fileInfo_main\">\r\n            <!--基础信息-->\r\n            <el-form class=\"form-main\">\r\n                <el-row class=\"form-main-title\">\r\n                    <span class=\"main-title-name\" v-text=\"detailForm.hname\"> </span>\r\n                    <span class=\"main-title-score\" v-text=\"detailForm.pointScore+' 分'\">90分</span>\r\n                    <span class=\"main-title-level main-title-score\" v-text=\" pointDict()\">A级</span>\r\n                    <a href=\"javascript:void(0)\"  v-loading=\"collectLoading\">\r\n                        <span class=\"main-title-wsc\" @click=\"editCollect\"><i class=\"iconfontlogo alicon_shoucang\"></i>未收藏</span>\r\n                    </a>\r\n                   <!-- <a href=\"#\" v-if=\"yscshow\"><span class=\"main-title-ysc\" @click=\"editCollect\"><i\r\n                            class=\"iconfontlogo alicon_shoucang\"></i>已收藏</span></a>\r\n-->\r\n\r\n                </el-row>\r\n                <el-row class=\"form-main-body\">\r\n                    <el-col :span=\"18\" class=\"form-body-l form-body-tabel\">\r\n                        <el-form label-width=\"135px\" label-position=\"left\">\r\n                            <el-col>\r\n                                <el-col :span=\"8\">\r\n                                    <el-form-item label=\"行业类别\">\r\n                                        <span v-text=\"detailForm.placeType\"></span>\r\n                                    </el-form-item>\r\n                                </el-col>\r\n                                <el-col :span=\"8\">\r\n                                    <el-form-item label=\"旅馆类别\">\r\n                                        <span v-text=\"detailForm.hotelKind\"></span>\r\n                                    </el-form-item>\r\n                                </el-col>\r\n                                <el-col :span=\"8\">\r\n                                    <el-form-item label=\"企业状态\">\r\n                                        <span v-text=\"detailForm.state \"></span>\r\n                                    </el-form-item>\r\n                                </el-col>\r\n                            </el-col>\r\n\r\n                            <el-col>\r\n                                <el-col :span=\"8\">\r\n                                    <el-form-item label=\"星级\">\r\n                                        <span v-text=\"detailForm.stars\"></span>\r\n                                    </el-form-item>\r\n                                </el-col>\r\n                                <el-col :span=\"8\">\r\n                                    <el-form-item label=\"等级\">\r\n                                        <span v-text=\"detailForm.grade\"></span>\r\n                                    </el-form-item>\r\n                                </el-col>\r\n                                <el-col :span=\"8\">\r\n                                    <el-form-item label=\"联机时间\">\r\n                                        <span v-text=\"detailForm.linkDate\"></span>\r\n                                    </el-form-item>\r\n                                </el-col>\r\n                            </el-col>\r\n\r\n                            <el-col>\r\n                                <el-col :span=\"8\">\r\n                                    <el-form-item label=\"房间数\">\r\n                                        <span v-text=\"detailForm.roomNum\"></span>\r\n                                    </el-form-item>\r\n                                </el-col>\r\n                                <el-col :span=\"8\">\r\n                                    <el-form-item label=\"床位数\">\r\n                                        <span v-text=\"detailForm.floors\"></span>\r\n                                    </el-form-item>\r\n                                </el-col>\r\n                                <el-col :span=\"8\">\r\n                                    <el-form-item label=\"组织机构代码\">\r\n                                        <span v-text=\"detailForm.psorgan\"></span>\r\n                                    </el-form-item>\r\n                                </el-col>\r\n                            </el-col>\r\n                            <el-col>\r\n                                <el-col :span=\"8\">\r\n                                    <el-form-item label=\"管辖派出所\">\r\n                                        <span v-text=\"detailForm.psCode\"></span>\r\n                                    </el-form-item>\r\n                                </el-col>\r\n                                <el-col :span=\"8\">\r\n                                    <el-form-item label=\"责任民警名称\">\r\n                                        <span v-text=\"detailForm.socialDuty\"></span>\r\n                                    </el-form-item>\r\n                                </el-col>\r\n                                <el-col :span=\"8\">\r\n                                    <el-form-item label=\"责任民警警号\">\r\n                                        <span v-text=\"detailForm.socialDuty\"></span>\r\n                                    </el-form-item>\r\n                                </el-col>\r\n                            </el-col>\r\n                            <el-col>\r\n                                <el-col :span=\"8\">\r\n                                    <el-form-item label=\"法定负责人\">\r\n                                        <span v-text=\"detailForm.legalPerson\"></span>\r\n                                    </el-form-item>\r\n                                </el-col>\r\n                                <el-col :span=\"8\">\r\n                                    <el-form-item label=\"经营负责人\">\r\n                                        <span v-text=\"detailForm.principal\"></span>\r\n                                    </el-form-item>\r\n                                </el-col>\r\n                                <el-col :span=\"8\">\r\n                                    <el-form-item label=\"治安负责人\">\r\n                                        <span v-text=\"detailForm.socialDuty\"></span>\r\n                                    </el-form-item>\r\n                                </el-col>\r\n                            </el-col>\r\n\r\n                            <el-col>\r\n                                <el-col :span=\"8\">\r\n                                    <el-form-item label=\"详细地址\">\r\n                                        <span v-text=\"detailForm.haddress\"></span>\r\n                                    </el-form-item>\r\n                                </el-col>\r\n                                <el-col :span=\"8\">\r\n                                    <el-form-item label=\"联系电话\">\r\n                                        <span v-text=\"detailForm.telPhone\"></span>\r\n                                    </el-form-item>\r\n                                </el-col>\r\n\r\n                            </el-col>\r\n\r\n                        </el-form>\r\n                    </el-col>\r\n                    <el-col :span=\"6\" class=\"form-body-r\">\r\n                        <img src=\"/img/unit.jpg\" alt=\"\">\r\n                    </el-col>\r\n                </el-row>\r\n            </el-form>\r\n            <!--卡片切换-->\r\n            <el-tabs type=\"border-card\" class=\"card-tab\">\r\n                <el-tab-pane label=\"异常警告\">\r\n                    <ul>\r\n                        <li>1</li>\r\n                        <li>[治安管理]</li>\r\n                        <li><a href=\"#\">从业人员一个月没有变动</a></li>\r\n                        <li>2019-05-15 11:18:00</li>\r\n                    </ul>\r\n                    <ul>\r\n                        <li>1</li>\r\n                        <li>[治安管理]</li>\r\n                        <li><a href=\"#\">从业人员一个月没有变动</a></li>\r\n                        <li>2019-05-15 11:18:00</li>\r\n                    </ul>\r\n                    <ul>\r\n                        <li>1</li>\r\n                        <li>[治安管理]</li>\r\n                        <li><a href=\"#\">从业人员一个月没有变动</a></li>\r\n                        <li>2019-05-15 11:18:00</li>\r\n                    </ul>\r\n                    <ul>\r\n                        <li>1</li>\r\n                        <li>[治安管理]</li>\r\n                        <li><a href=\"#\">从业人员一个月没有变动</a></li>\r\n                        <li>2019-05-15 11:18:00</li>\r\n                    </ul>\r\n                    <ul>\r\n                        <li>1</li>\r\n                        <li>[治安管理]</li>\r\n                        <li><a href=\" \">从业人员一个月没有变动</a></li>\r\n                        <li>2019-05-15 11:18:00</li>\r\n                    </ul>\r\n                </el-tab-pane>\r\n                <el-tab-pane label=\"平面图\">\r\n                    <img src=\"/img/unit.jpg\" alt=\"\" style=\"height: 170px;\">\r\n                </el-tab-pane>\r\n            </el-tabs>\r\n            <!--在岗人数列表-->\r\n            <div class=\"table-box\">\r\n                <el-row class=\"table-box-top\">\r\n                    <el-col :span=\"4\" class=\"box-top-item1\">在岗人数 <span v-text=\"page.total\"\r\n                                                                       v-loading=\"tableLoading\">0</span></el-col>\r\n                    <el-col :span=\"4\" class=\"box-top-item2\">本月新上岗 <span v-text=\"countNum.inc\"\r\n                                                                        v-loading=\"tableLoading\"></span>\r\n                        <span>人</span><i\r\n                                class=\"iconfontlogo aljiang1\"></i></el-col>\r\n                    <el-col :span=\"4\" class=\"box-top-item3\">本月离岗 <span v-text=\"countNum.quit\"\r\n                                                                       v-loading=\"tableLoading\"></span><span>人</span><i\r\n                            class=\"iconfontlogo aljiang\"></i></el-col>\r\n                    <el-col :span=\"12\" class=\"box-top-item4\">\r\n                        <el-button type=\"text\" @click=\"moreClick\">更多>></el-button>\r\n                    </el-col>\r\n                </el-row>\r\n                <el-table\r\n                        :header-cell-style=\"{background:'#eee',color:'#000'}\"\r\n                        :cell-style=\"cellStyle\"\r\n                        :row-style=\"{height:'90px'}\"\r\n                        :data=\"employeeData\"\r\n                        style=\"width: 100%\"\r\n                        :page=\"page\"\r\n                        v-loading=\"tableLoading\"\r\n                >\r\n                    <el-table-column\r\n                            width=\"50\"\r\n                            type=\"index\"\r\n                            label=\"序号\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"imgUrl\"\r\n                            label=\"照片\"\r\n                            align=\"center\"\r\n                            width=\"100\"\r\n                    >\r\n                        <template  slot-scope=\"scope\">\r\n\r\n                           <img style=\"height:80px; width:80px;border-radius: 5px;\"\r\n                                 src=\"/img/people.png\"\r\n                                 :id=\"scope.row.psid\"\r\n                                 :src=\"initImg(scope.row.psid,scope.row.city)\"/>\r\n\r\n                        </template>\r\n                    </el-table-column>\r\n\r\n\r\n                    <el-table-column\r\n                            prop=\"xm\"\r\n                            label=\"姓名\">\r\n                        <template slot-scope=\"scope\">\r\n                            <button type=\"text\" class=\"el-button el-button--text el-button--small\"\r\n                                    @click=\"viewEmployeeDialog(scope.row)\">\r\n                                {{scope.row.xm}}\r\n                            </button>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"zjhm\"\r\n                            width=\"200\"\r\n                            label=\"证件号码\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"xb\"\r\n                            label=\"姓别\"\r\n                            :formatter =\"sexDict\"\r\n                    >\r\n\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"csrq\"\r\n                            min-width=\"120\"\r\n                            label=\"出生日期\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"gzgw\"\r\n                            label=\"岗位名称\"\r\n                            :formatter =\"gwDict\"\r\n                    >\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"lxfs1\"\r\n                            min-width=\"120\"\r\n                            label=\"联系电话\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            width=\"200\"\r\n                            prop=\"rylb\"\r\n                            label=\"从业人员类别\">\r\n                    </el-table-column>\r\n                </el-table>\r\n            </div>\r\n            <!--人脸识别-->\r\n            <div class=\"table-face\">\r\n                <div class=\"table-face-top\">\r\n                    <el-row>\r\n                        <el-col :span=\"20\" class=\"face-top-title\">\r\n                            人脸识别\r\n                        </el-col>\r\n                        <el-col :span=\"4\" class=\"face-top-more\">\r\n                            <el-button type=\"text\" @click=\"dialogTablePlaceVisible = true\">更多>></el-button>\r\n                        </el-col>\r\n                    </el-row>\r\n                </div>\r\n                <el-table\r\n                        class=\"table-face-body\"\r\n                        :header-cell-style=\"{background:'#eee',color:'#000'}\"\r\n                        :cell-style=\"facecellStyle\"\r\n                        :data=\"employeeData\"\r\n                        style=\"width: 100%\">\r\n                    <el-table-column\r\n                            width=\"50\"\r\n                            type=\"index\"\r\n                            label=\"序号\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"xm\"\r\n                            label=\"姓名\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"zjhm\"\r\n                            width=\"200\"\r\n                            label=\"证件号码\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"xb\"\r\n                            width=\"70\"\r\n                            label=\"姓别\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"csrq\"\r\n                            min-width=\"120\"\r\n                            label=\"出生日期\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"rybaLb\"\r\n                            label=\"人员类型\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"rybaDjsj\"\r\n                            min-width=\"120\"\r\n                            label=\"出现时间\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            width=\"200\"\r\n                            prop=\"rybaLb\"\r\n                            label=\"七类人员类型\">\r\n                    </el-table-column>\r\n                </el-table>\r\n            </div>\r\n            <!--地图区域-->\r\n            <div class=\"map table-face\">\r\n                <div class=\"table-face-top\">\r\n                    <el-row>\r\n                        <el-col :span=\"20\" class=\"face-top-title\">\r\n                            地图区域\r\n                        </el-col>\r\n                    </el-row>\r\n                </div>\r\n                <div class=\"map_box\">\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!--从业人员详情弹窗-->\r\n        <el-dialog title=\"详情\" :visible.sync=\"employeeView\" fullscreen :append-to-body=\"true\" @close='closeDialog'>\r\n            <employee-detail v-bind:detail-row=\"employeeDetail\"/>\r\n            <div slot=\"footer\"\r\n                 class=\"dialog-footer\">\r\n                <el-button type=\"primary\" @click=\"closeDialog\">关 闭\r\n                </el-button>\r\n            </div>\r\n\r\n        </el-dialog>\r\n        <el-dialog title=\"人脸识别\"\r\n                   width=\"80%\"\r\n                   :visible.sync=\"dialogTablePlaceVisible\">\r\n            <el-table\r\n                    class=\"table-face-body\"\r\n                    :header-cell-style=\"{background:'#eee',color:'#000'}\"\r\n                    :cell-style=\"facecellStyle\"\r\n                    :data=\"employeeData\"\r\n                    style=\"width: 100%\">\r\n                <el-table-column\r\n                        label=\"序号\"\r\n                        type=\"index\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"rybaMc\"\r\n                        label=\"姓名\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"rybaZjhm\"\r\n                        width=\"200\"\r\n                        label=\"证件号码\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"rybaXb\"\r\n\r\n                        label=\"姓别\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"rybaCsrq\"\r\n                        min-width=\"120\"\r\n                        label=\"出生日期\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"rybaLb\"\r\n                        label=\"人员类型\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"rybaDjsj\"\r\n                        min-width=\"120\"\r\n                        label=\"出现时间\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                        width=\"200\"\r\n                        prop=\"rybaLb\"\r\n                        label=\"七类人员类型\">\r\n                </el-table-column>\r\n            </el-table>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import {findOneHotel} from \"@/api/portal/archive/lvye/hotel\";\r\n    import {findEmployeePage, monthCount, getImg} from \"@/api/portal/archive/lvye/employee\";\r\n    import '@/styles/portal/archive/place-detail.scss'\r\n    import employeeDetail from '../employee/employeeDetail'\r\n    import {findLabel,getDict,getLabel}  from  \"@/api/portal/archive/dict/dict\";\r\n    import {remote}  from  \"@/api/admin/dict\";\r\n    export default {\r\n        components: {\r\n            employeeDetail\r\n        },\r\n        name: 'hotelDetail',\r\n        props: [\"paramForm\"],\r\n        data() {\r\n            return {\r\n                detailForm: {},\r\n                imgMap : new Map(),\r\n                employeeView: false,\r\n                employeeDetail: {},\r\n                searchFrom: {\r\n                    dwbh: undefined,\r\n                    menuId: undefined,\r\n                },\r\n                countNum: {\r\n                    quit: 0,\r\n                    inc: 0\r\n                },\r\n                tableLoading: true,\r\n                collectLoading:false,\r\n                appleToBody: true,\r\n                url: undefined,\r\n                page: {\r\n                    total: 0, // 总页数\r\n                    currentPage: 1, // 当前页数\r\n                    pageSize: 5 // 每页显示多少条\r\n                },\r\n                dialogTableVisible: false,\r\n                dialogTablePlaceVisible: false,\r\n                employeeData: [],\r\n                sexDictData:[],\r\n                gwDictData:[],\r\n                pointTypeData:[],\r\n            }\r\n        },\r\n        created() {\r\n\r\n            this.employeeDictData()\r\n            this.hotelDictData()\r\n            this.searchFrom.dwbh = this.paramForm.unitId;\r\n            this.searchFrom.menuId = this.paramForm.menuId;\r\n            this.findHotelDetail(this.searchFrom);\r\n            this.findEmployee(this.page, this.searchFrom);\r\n            this.employeeCount(this.searchFrom.dwbh);\r\n\r\n        },\r\n        watch: {\r\n            paramForm: {\r\n                //深度监控父组件传递过来的值、否则无法根据传递过来的值更新数据\r\n                handler() {\r\n\r\n                    this.searchFrom.dwbh = this.paramForm.unitId;\r\n                    this.searchFrom.menuId = this.paramForm.menuId;\r\n                    this.findHotelDetail(this.searchFrom);\r\n                    this.findEmployee(this.page, this.searchFrom);\r\n                    this.employeeCount(this.searchFrom.dwbh);\r\n\r\n\r\n                },\r\n                deep: true\r\n            },\r\n        },\r\n        methods: {\r\n            closeDialog(){\r\n                this.employeeView=false\r\n                this.imgMap.clear()\r\n            },\r\n            editCollect(){\r\n                this.$message({\r\n                    type:'success',\r\n                    dangerouslyUseHTMLString: true,\r\n                    duration:4000,\r\n                    message: '操作成功'\r\n                });\r\n                this.collectLoading=true\r\n                alert('收藏信息')\r\n                this.collectLoading=false\r\n            },\r\n\r\n\r\n            initDict(){\r\n\r\n                findLabel('LGLB','ly',this.detailForm.hotelKind).then(value=>{\r\n                    this.detailForm.hotelKind=value\r\n                }).catch((err) => {});\r\n                findLabel('0209','ly',this.detailForm.state).then(value=>{\r\n                    this.detailForm.state=value\r\n                }).catch((err) => {});\r\n                findLabel('0210','ly',this.detailForm.stars).then(value=>{\r\n                    this.detailForm.stars=value\r\n                }).catch((err) => {});\r\n                findLabel('0211','ly',this.detailForm.grade).then(value=>{\r\n                    this.detailForm.grade=value\r\n                }).catch((err) => {});\r\n\r\n\r\n              },\r\n            sexDict(row, column){\r\n                return getLabel(this.sexDictData,row.xb)\r\n            },\r\n            gwDict(row, column){\r\n                return getLabel(this.gwDictData,row.gzgw)\r\n            },\r\n            pointDict(){\r\n               return getLabel( this.pointTypeData, this.detailForm.pointType)\r\n            },\r\n            viewEmployeeDialog(row) {\r\n\r\n                this.employeeView = true\r\n                this.employeeDetail = row\r\n\r\n\r\n            },\r\n            employeeDictData(){\r\n                getDict('GZGW','ly').then(response => {\r\n                    this.gwDictData = response.data.data||[];\r\n\r\n                }).catch((err) => {});\r\n                getDict('0122','ly').then(response => {\r\n                    this.sexDictData = response.data.data||[];\r\n                }).catch((err) => {});\r\n\r\n            },\r\n            hotelDictData(){\r\n                remote('jfdj').then(response => {\r\n                    this.pointTypeData = response.data.data||{}\r\n                }).catch((err) => {});\r\n            },\r\n\r\n            initImg(id, code) {\r\n                let img=this.imgMap.get(id);\r\n                if(null===img||'undefined'===typeof (img)||''===img) {\r\n                    getImg(id, code)\r\n                    this.imgMap.set(id,id);\r\n                }\r\n            },\r\n            findHotelDetail(form) {\r\n                findOneHotel(Object.assign({}, form)).then(response => {\r\n                    this.detailForm = response.data.data;\r\n\r\n                    this. initDict()\r\n                })\r\n            },\r\n            findEmployee(page, form) {\r\n                this.imgMap.clear()\r\n                this.tableLoading = true\r\n                findEmployeePage(Object.assign({\r\n                    current: page.currentPage,\r\n                    size: page.pageSize,\r\n                    quitType: '20'\r\n                }, form)).then(response => {\r\n                    this.employeeData = response.data.data.records\r\n                    this.page.total = response.data.data.total\r\n                    this.tableLoading = false\r\n\r\n                })\r\n            },\r\n            employeeCount(unitId) {\r\n                monthCount(unitId).then(response => {\r\n                    this.countNum = response.data.data\r\n\r\n                })\r\n            },\r\n\r\n\r\n            moreClick() {\r\n                this.$emit(\"moreClick\", 1);\r\n            },\r\n            cellStyle({row, column, rowIndex, columnIndex}) {\r\n                if (columnIndex === 3) {\r\n                    return 'color:#6aaff8'\r\n                } else {\r\n                    return ''\r\n                }\r\n            },\r\n            snxxStyle({row, column, rowIndex, columnIndex}) {\r\n                if (columnIndex === 0) {\r\n                    return 'color:#6aaff8'\r\n                } else {\r\n                    return ''\r\n                }\r\n            },\r\n            facecellStyle({row, column, rowIndex, columnIndex}) {\r\n                if (columnIndex === 2) {\r\n                    return 'color:#6aaff8'\r\n                } else if (columnIndex === 0) {\r\n                    return 'text-align:center'\r\n                } else {\r\n                    return ''\r\n                }\r\n            },\r\n\r\n        }\r\n    }\r\n</script>\r\n\r\n\r\n"]}]}